{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js??ref--0-0!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/components/gamePhaseComponents/MapManager.vue?vue&type=script&lang=js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/components/gamePhaseComponents/MapManager.vue","mtime":1613902215950},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js","mtime":1612540687689},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/vue-loader-v16/dist/index.js","mtime":1612540688641}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgUElYSSBmcm9tICJwaXhpLmpzIjsKaW1wb3J0IHsgZ2V0Q29udGFpbmVyRnJvbVN0YXRpb25zLCBtYXAsIHBhdGhUaWxlc2V0SGVpZ2h0LCBwYXRoVGlsZXNldFdpZHRoLCBzY2FsZSwgdGlsZVNpemUgfSBmcm9tICIuLi8uLi9jb25zdGFudHMvbWFwQ29uc3RhbnRzIjsKaW1wb3J0IHN0YXRpb25zIGZyb20gIi4uLy4uL2NvbnN0YW50cy9zdGF0aW9ucyI7CmltcG9ydCB7IG9uTW91bnRlZCB9IGZyb20gInZ1ZSI7CmltcG9ydCBwYXRoVGlsZXNldEltYWdlIGZyb20gIi4uLy4uL2Fzc2V0cy9wYXRodGlsZXNldC5wbmciOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1hcE1hbmFnZXIiLAoKICAvKm1ldGhvZHM6IHsNCiAgICB2ZXJ0aWNhbFNjcm9sbChudW1iZXIsIGVsZW1lbnQpIHsNCiAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wICs9IG51bWJlcjsNCiAgICB9LA0KICAgIGhvcml6b250YWxTY3JvbGwobnVtYmVyLCBlbGVtZW50KSB7DQogICAgICBlbGVtZW50LnNjcm9sbExlZnQgKz0gbnVtYmVyOw0KICAgIH0sDQogICAga2V5UHJlc3NlZChldmVudCkgew0KICAgICAgbGV0IGVsZW1lbnRDbGFzcyA9ICIubWFwLW1hbmFnZXJfX21haW4tcGFuZWwiOw0KICAgICAgc3dpdGNoIChldmVudC5rZXkudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKXsNCiAgICAgICAgY2FzZSAidyI6DQogICAgICAgICAgdGhpcy52ZXJ0aWNhbFNjcm9sbCgta2V5U2Nyb2xsU3BlZWQsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudENsYXNzKSk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgImFycm93dXAiOg0KICAgICAgICAgIHRoaXMudmVydGljYWxTY3JvbGwoLWtleVNjcm9sbFNwZWVkLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRDbGFzcykpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJhIjoNCiAgICAgICAgICB0aGlzLmhvcml6b250YWxTY3JvbGwoLWtleVNjcm9sbFNwZWVkLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRDbGFzcykpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJhcnJvd2xlZnQiOg0KICAgICAgICAgIHRoaXMuaG9yaXpvbnRhbFNjcm9sbCgta2V5U2Nyb2xsU3BlZWQsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudENsYXNzKSk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgInMiOg0KICAgICAgICAgIHRoaXMudmVydGljYWxTY3JvbGwoa2V5U2Nyb2xsU3BlZWQsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudENsYXNzKSk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgImFycm93ZG93biI6DQogICAgICAgICAgdGhpcy52ZXJ0aWNhbFNjcm9sbChrZXlTY3JvbGxTcGVlZCwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50Q2xhc3MpKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiZCI6DQogICAgICAgICAgdGhpcy5ob3Jpem9udGFsU2Nyb2xsKGtleVNjcm9sbFNwZWVkLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRDbGFzcykpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJhcnJvd3JpZ2h0IjoNCiAgICAgICAgICB0aGlzLmhvcml6b250YWxTY3JvbGwoa2V5U2Nyb2xsU3BlZWQsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudENsYXNzKSk7DQogICAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgfSwNCiAgICBtb3VzZURvd24oKSB7DQogICAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTsNCiAgICB9LA0KICAgIG1vdXNlTW92ZShldmVudCkgew0KICAgICAgaWYodGhpcy5kcmFnZ2luZyl7DQogICAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnN0eWxlLmN1cnNvciA9ICJtb3ZlIjsNCiAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuc2Nyb2xsTGVmdCAtPSBldmVudC5tb3ZlbWVudFg7DQogICAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnNjcm9sbFRvcCAtPSBldmVudC5tb3ZlbWVudFk7DQogICAgICB9DQogICAgfSwNCiAgICBtb3VzZVVwKGV2ZW50KSB7DQogICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7DQogICAgICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5zdHlsZS5jdXJzb3IgPSAiYXV0byI7DQogICAgfSwNCiAgICB6b29tKGV2ZW50KSB7DQogICAgICBsZXQgem9vbUZhY3RvciA9IDE7DQogICAgICBpZih0aGlzLmRlbHRhWStldmVudC5kZWx0YVk8MCl7DQogICAgICAgIHRoaXMuZGVsdGFZID0gMDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZGVsdGFZICs9IGV2ZW50LmRlbHRhWTsNCiAgICAgICAgem9vbUZhY3RvciA9IE1hdGgucG93KHpvb21GdW5jdGlvbkJhc2UsIGV2ZW50LmRlbHRhWS9tb3VzZVdoZWVsUmVkdWN0aW9uRmFjdG9yKTsNCiAgICAgIH0NCiAgICAgIGxldCBwYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5tYXAtbWFuYWdlcl9fbWFpbi1wYW5lbCIpOw0KICAgICAgbGV0IHNMID0gZXZlbnQub2Zmc2V0WCooem9vbUZhY3Rvci0xKStwYW5lbC5zY3JvbGxMZWZ0Knpvb21GYWN0b3I7DQogICAgICBsZXQgc1QgPSBldmVudC5vZmZzZXRZKih6b29tRmFjdG9yLTEpK3BhbmVsLnNjcm9sbFRvcCp6b29tRmFjdG9yOw0KICAgICAgcGFuZWwuc2Nyb2xsTGVmdCA9IE1hdGgucm91bmQoc0wpOw0KICAgICAgcGFuZWwuc2Nyb2xsVG9wID0gTWF0aC5yb3VuZChzVCk7DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGltZ1BlcmNlbnRhZ2U6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiAxMDAqTWF0aC5wb3coem9vbUZ1bmN0aW9uQmFzZSwgdGhpcy5kZWx0YVkvbW91c2VXaGVlbFJlZHVjdGlvbkZhY3Rvcik7DQogICAgfQ0KICB9LCovCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgLy93aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIHRoaXMua2V5UHJlc3NlZCk7CiAgICB2YXIgYXBwID0gbmV3IFBJWEkuQXBwbGljYXRpb24oewogICAgICB3aWR0aDogdGlsZVNpemUgKiBzY2FsZSAqIG1hcC53aWR0aCwKICAgICAgaGVpZ2h0OiB0aWxlU2l6ZSAqIHNjYWxlICogbWFwLmhlaWdodCwKICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsCiAgICAgIGFudGlhbGlhczogZmFsc2UKICAgIH0pOwogICAgUElYSS5zZXR0aW5ncy5ST1VORF9QSVhFTFMgPSB0cnVlOwogICAgYXBwLmxvYWRlci5hZGQoInBhdGhUaWxlc2V0IiwgcGF0aFRpbGVzZXRJbWFnZSkgLy8uYWRkKCJiYWNrZ3JvdW5kVGlsZXNldCIsICJ0aWxlc2V0LnBuZyIpCiAgICAubG9hZChmdW5jdGlvbiAobG9hZGVyLCByZXNvdXJjZXMpIHsKICAgICAgLy9jcm9wIHRpbGVzZXRzIHRvIGdldCB0aWxlcyB0ZXh0dXJlcwogICAgICB2YXIgcGF0aFRleHR1cmVzID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhUaWxlc2V0V2lkdGggKiBwYXRoVGlsZXNldEhlaWdodDsgaSsrKSB7CiAgICAgICAgdmFyIHggPSBpICUgcGF0aFRpbGVzZXRXaWR0aDsKICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoaSAvIHBhdGhUaWxlc2V0V2lkdGgpOwogICAgICAgIHBhdGhUZXh0dXJlc1tpXSA9IG5ldyBQSVhJLlRleHR1cmUocmVzb3VyY2VzLnBhdGhUaWxlc2V0LnRleHR1cmUsIG5ldyBQSVhJLlJlY3RhbmdsZSh4ICogdGlsZVNpemUsIHkgKiB0aWxlU2l6ZSwgdGlsZVNpemUsIHRpbGVTaXplKSk7CiAgICAgIH0KICAgICAgLypmb3IgKGxldCBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgYXBwLnN0YWdlLmFkZENoaWxkKGdldENvbnRhaW5lckZyb21QYXRoT2JqZWN0KGxpbmtzW2ldLCB0aWxlU2l6ZSwgc2NhbGUsIHBhdGhUZXh0dXJlcykpOw0KICAgICAgfSovCgoKICAgICAgYXBwLnN0YWdlLmFkZENoaWxkKGdldENvbnRhaW5lckZyb21TdGF0aW9ucyhzdGF0aW9ucywgdGlsZVNpemUsIHNjYWxlLCBwYXRoVGV4dHVyZXMpKTsKICAgIH0pOwogICAgYXBwLmxvYWRlci5vbkVycm9yLmFkZChmdW5jdGlvbiAoZSkgewogICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgfSk7CiAgICBvbk1vdW50ZWQoZnVuY3Rpb24gKCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWFwLW1hbmFnZXJfX21haW4tcGFuZWwiKS5hcHBlbmRDaGlsZChhcHAudmlldyk7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/components/gamePhaseComponents/MapManager.vue"],"names":[],"mappings":"AAOA,OAAO,KAAM,IAAb,MAAuB,SAAvB;AACA,SACE,wBADF,EAEE,GAFF,EAGE,iBAHF,EAIE,gBAJF,EAKE,KALF,EAME,QANF,QAOO,8BAPP;AAQA,OAAO,QAAP,MAAqB,0BAArB;AACA,SAAQ,SAAR,QAAwB,KAAxB;AACA,OAAO,gBAAP,MAA6B,8BAA7B;AACA,eAAe;AACb,EAAA,IAAI,EAAE,YADO;;AAEb;AACE;AACE;AACF;AACA;AACE;AACF;AACA;AACE;AACA;AACE;AACE;AACA;AACF;AACE;AACA;AACF;AACE;AACA;AACF;AACE;AACA;AACF;AACE;AACA;AACF;AACE;AACA;AACF;AACE;AACA;AACF;AACE;AACA;AACJ;AACF;AACA;AACE;AACF;AACA;AACE;AACE;AACA;AACA;AACF;AACF;AACA;AACE;AACA;AACF;AACA;AACE;AACA;AACE;AACF;AACE;AACA;AACF;AACA;AACA;AACA;AACA;AACA;AACF;AACF;AACA;AACE;AACE;AACF;AACF;AACA,EAAA,KAxEa,mBAwEL;AACN;AAEA,QAAM,GAAE,GAAI,IAAI,IAAI,CAAC,WAAT,CAAqB;AAC/B,MAAA,KAAK,EAAE,QAAO,GAAI,KAAX,GAAmB,GAAG,CAAC,KADC;AAE/B,MAAA,MAAM,EAAE,QAAO,GAAI,KAAX,GAAmB,GAAG,CAAC,MAFA;AAG/B,MAAA,WAAW,EAAE,IAHkB;AAI/B,MAAA,SAAS,EAAE;AAJoB,KAArB,CAAZ;AAOA,IAAA,IAAI,CAAC,QAAL,CAAc,YAAd,GAA6B,IAA7B;AAEA,IAAA,GAAG,CAAC,MAAJ,CACK,GADL,CACS,aADT,EACwB,gBADxB,EAEI;AAFJ,KAGK,IAHL,CAGU,UAAC,MAAD,EAAS,SAAT,EAAuB;AAE3B;AAEA,UAAI,YAAW,GAAI,EAAnB;;AACA,WAAK,IAAI,CAAA,GAAI,CAAb,EAAgB,CAAA,GAAI,gBAAe,GAAI,iBAAvC,EAA0D,CAAC,EAA3D,EAA+D;AAC7D,YAAI,CAAA,GAAI,CAAA,GAAI,gBAAZ;AACA,YAAI,CAAA,GAAI,IAAI,CAAC,KAAL,CAAW,CAAA,GAAI,gBAAf,CAAR;AACA,QAAA,YAAY,CAAC,CAAD,CAAZ,GAAkB,IAAI,IAAI,CAAC,OAAT,CACd,SAAS,CAAC,WAAV,CAAsB,OADR,EAEd,IAAI,IAAI,CAAC,SAAT,CAAmB,CAAA,GAAI,QAAvB,EAAiC,CAAA,GAAI,QAArC,EAA+C,QAA/C,EAAyD,QAAzD,CAFc,CAAlB;AAIF;AAEA;AACE;AACF;;;AACA,MAAA,GAAG,CAAC,KAAJ,CAAU,QAAV,CAAmB,wBAAwB,CAAC,QAAD,EAAW,QAAX,EAAqB,KAArB,EAA4B,YAA5B,CAA3C;AAED,KAtBL;AAyBA,IAAA,GAAG,CAAC,MAAJ,CAAW,OAAX,CAAmB,GAAnB,CAAuB,UAAC,CAAD,EAAK;AAC1B,MAAA,OAAO,CAAC,KAAR,CAAc,CAAd;AACD,KAFD;AAIA,IAAA,SAAS,CAAC,YAAM;AACd,MAAA,QAAQ,CAAC,cAAT,CAAwB,yBAAxB,EAAmD,WAAnD,CAA+D,GAAG,CAAC,IAAnE;AACD,KAFQ,CAAT;AAIF;AArHa,CAAf","sourcesContent":["<template>\r\n  <div class=\"map-manager__main-panel\" id=\"map-manager__main-panel\">\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport *  as PIXI from \"pixi.js\";\r\nimport {\r\n  getContainerFromStations,\r\n  map,\r\n  pathTilesetHeight,\r\n  pathTilesetWidth,\r\n  scale,\r\n  tileSize\r\n} from \"../../constants/mapConstants\";\r\nimport stations from \"../../constants/stations\";\r\nimport {onMounted} from \"vue\";\r\nimport pathTilesetImage from \"../../assets/pathtileset.png\";\r\nexport default {\r\n  name: \"MapManager\",\r\n  /*methods: {\r\n    verticalScroll(number, element) {\r\n      element.scrollTop += number;\r\n    },\r\n    horizontalScroll(number, element) {\r\n      element.scrollLeft += number;\r\n    },\r\n    keyPressed(event) {\r\n      let elementClass = \".map-manager__main-panel\";\r\n      switch (event.key.toString().toLowerCase()){\r\n        case \"w\":\r\n          this.verticalScroll(-keyScrollSpeed, document.querySelector(elementClass));\r\n          break;\r\n        case \"arrowup\":\r\n          this.verticalScroll(-keyScrollSpeed, document.querySelector(elementClass));\r\n          break;\r\n        case \"a\":\r\n          this.horizontalScroll(-keyScrollSpeed, document.querySelector(elementClass));\r\n          break;\r\n        case \"arrowleft\":\r\n          this.horizontalScroll(-keyScrollSpeed, document.querySelector(elementClass));\r\n          break;\r\n        case \"s\":\r\n          this.verticalScroll(keyScrollSpeed, document.querySelector(elementClass));\r\n          break;\r\n        case \"arrowdown\":\r\n          this.verticalScroll(keyScrollSpeed, document.querySelector(elementClass));\r\n          break;\r\n        case \"d\":\r\n          this.horizontalScroll(keyScrollSpeed, document.querySelector(elementClass));\r\n          break;\r\n        case \"arrowright\":\r\n          this.horizontalScroll(keyScrollSpeed, document.querySelector(elementClass));\r\n          break;\r\n      }\r\n    },\r\n    mouseDown() {\r\n      this.dragging = true;\r\n    },\r\n    mouseMove(event) {\r\n      if(this.dragging){\r\n        event.target.parentNode.style.cursor = \"move\";\r\n        event.target.parentNode.scrollLeft -= event.movementX;\r\n        event.target.parentNode.scrollTop -= event.movementY;\r\n      }\r\n    },\r\n    mouseUp(event) {\r\n      this.dragging = false;\r\n      event.target.parentNode.style.cursor = \"auto\";\r\n    },\r\n    zoom(event) {\r\n      let zoomFactor = 1;\r\n      if(this.deltaY+event.deltaY<0){\r\n        this.deltaY = 0;\r\n      } else {\r\n        this.deltaY += event.deltaY;\r\n        zoomFactor = Math.pow(zoomFunctionBase, event.deltaY/mouseWheelReductionFactor);\r\n      }\r\n      let panel = document.querySelector(\".map-manager__main-panel\");\r\n      let sL = event.offsetX*(zoomFactor-1)+panel.scrollLeft*zoomFactor;\r\n      let sT = event.offsetY*(zoomFactor-1)+panel.scrollTop*zoomFactor;\r\n      panel.scrollLeft = Math.round(sL);\r\n      panel.scrollTop = Math.round(sT);\r\n    }\r\n  },\r\n  computed: {\r\n    imgPercentage: function () {\r\n      return 100*Math.pow(zoomFunctionBase, this.deltaY/mouseWheelReductionFactor);\r\n    }\r\n  },*/\r\n  setup() {\r\n    //window.addEventListener(\"keydown\", this.keyPressed);\r\n\r\n    const app = new PIXI.Application({\r\n      width: tileSize * scale * map.width,\r\n      height: tileSize * scale * map.height,\r\n      transparent: true,\r\n      antialias: false\r\n    });\r\n\r\n    PIXI.settings.ROUND_PIXELS = true;\r\n\r\n    app.loader\r\n        .add(\"pathTileset\", pathTilesetImage)\r\n        //.add(\"backgroundTileset\", \"tileset.png\")\r\n        .load((loader, resources) => {\r\n\r\n          //crop tilesets to get tiles textures\r\n\r\n          let pathTextures = [];\r\n          for (let i = 0; i < pathTilesetWidth * pathTilesetHeight; i++) {\r\n            let x = i % pathTilesetWidth;\r\n            let y = Math.floor(i / pathTilesetWidth);\r\n            pathTextures[i] = new PIXI.Texture(\r\n                resources.pathTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          /*for (let i = 0; i < links.length; i++){\r\n            app.stage.addChild(getContainerFromPathObject(links[i], tileSize, scale, pathTextures));\r\n          }*/\r\n          app.stage.addChild(getContainerFromStations(stations, tileSize, scale, pathTextures));\r\n\r\n        });\r\n\r\n\r\n    app.loader.onError.add((e)=>{\r\n      console.error(e);\r\n    });\r\n\r\n    onMounted(() => {\r\n      document.getElementById(\"map-manager__main-panel\").appendChild(app.view);\r\n    })\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.map-manager__main-panel{\r\n  overflow: hidden;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 0 20px 20px 0;\r\n  .map-manager__map{\r\n    vertical-align: top;\r\n  }\r\n}\r\n</style>"],"sourceRoot":""}]}