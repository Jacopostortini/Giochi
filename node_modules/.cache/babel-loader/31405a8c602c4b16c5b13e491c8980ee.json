{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js??ref--0-0!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/components/gamePhaseComponents/MapManager.vue?vue&type=script&lang=js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/components/gamePhaseComponents/MapManager.vue","mtime":1614934021109},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/thread-loader/dist/cjs.js","mtime":1612540688605},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js","mtime":1612540687689},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/vue-loader-v16/dist/index.js","mtime":1612540688641}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXRoLnNpZ24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICogYXMgUElYSSBmcm9tICJwaXhpLmpzLWxlZ2FjeSI7CmltcG9ydCB7IGZpbmRTdGF0aW9uQnlQb3NpdGlvbiwgZ2V0Q29udGFpbmVyRnJvbVN0YXRpb25zLCBrZXlQcmVzc2VkLCB0aWxlc2V0c0RpbWVuc2lvbiwgbWFwRGltZW5zaW9uLCBtYXhab29tLCBtaW5ab29tLCB0aWxlU2l6ZSwgem9vbVNlbnNpYmlsaXR5IH0gZnJvbSAiLi4vLi4vY29uc3RhbnRzL21hcENvbnN0YW50cyI7CmltcG9ydCBzdGF0aW9ucyBmcm9tICIuLi8uLi9jb25zdGFudHMvc3RhdGlvbnMiOwppbXBvcnQgeyBvbk1vdW50ZWQsIHJlZiB9IGZyb20gInZ1ZSI7CmltcG9ydCBwYXRoc1RpbGVzZXRJbWFnZSBmcm9tICIuLi8uLi9hc3NldHMvdGlsZXNldHMvcGF0aHNUaWxlc2V0LnBuZyI7CmltcG9ydCBzdGF0aW9uc1RpbGVzZXRJbWFnZSBmcm9tICIuLi8uLi9hc3NldHMvdGlsZXNldHMvc3RhdGlvbnNUaWxlc2V0LnBuZyI7CmltcG9ydCBzdHJlZXRzVGlsZXNldEltYWdlIGZyb20gIi4uLy4uL2Fzc2V0cy90aWxlc2V0cy9zdHJlZXRzVGlsZXNldC5wbmciOwppbXBvcnQgYnVpbGRpbmdzVGlsZXNldEltYWdlIGZyb20gIi4uLy4uL2Fzc2V0cy90aWxlc2V0cy9idWlsZGluZ3NUaWxlc2V0LnBuZyI7CmltcG9ydCBiYWNrZ3JvdW5kVGlsZXNldEltYWdlIGZyb20gIi4uLy4uL2Fzc2V0cy90aWxlc2V0cy9iYWNrZ3JvdW5kVGlsZXNldC5wbmciOwppbXBvcnQgcGF0aHMgZnJvbSAiLi4vLi4vY29uc3RhbnRzL3BhdGhzIjsKaW1wb3J0IHN0cmVldHMgZnJvbSAiLi4vLi4vY29uc3RhbnRzL3N0cmVldHMiOwppbXBvcnQgYnVpbGRpbmdzIGZyb20gIi4uLy4uL2NvbnN0YW50cy9idWlsZGluZ3MiOwppbXBvcnQgYmFja2dyb3VuZCBmcm9tICIuLi8uLi9jb25zdGFudHMvYmFja2dyb3VuZCI7CmltcG9ydCByZW5kZXJlciBmcm9tICIuLi8uLi9tb2R1bGVzL3JlbmRlcmVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNYXBNYW5hZ2VyIiwKICBwcm9wczogewogICAgcGxheWVyczogQXJyYXkKICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgY3R4KSB7CiAgICB2YXIgYXBwID0gbmV3IFBJWEkuQXBwbGljYXRpb24oewogICAgICB3aWR0aDogdGlsZVNpemUgKiBtYXBEaW1lbnNpb24ud2lkdGgsCiAgICAgIGhlaWdodDogdGlsZVNpemUgKiBtYXBEaW1lbnNpb24uaGVpZ2h0LAogICAgICB0cmFuc3BhcmVudDogdHJ1ZSwKICAgICAgYW50aWFsaWFzOiBmYWxzZQogICAgfSk7CiAgICBQSVhJLnNldHRpbmdzLlJPVU5EX1BJWEVMUyA9IHRydWU7CiAgICBhcHAubG9hZGVyLmFkZCgicGF0aHNUaWxlc2V0IiwgcGF0aHNUaWxlc2V0SW1hZ2UpLmFkZCgic3RhdGlvbnNUaWxlc2V0Iiwgc3RhdGlvbnNUaWxlc2V0SW1hZ2UpLmFkZCgic3RyZWV0c1RpbGVzZXQiLCBzdHJlZXRzVGlsZXNldEltYWdlKS5hZGQoImJ1aWxkaW5nc1RpbGVzZXQiLCBidWlsZGluZ3NUaWxlc2V0SW1hZ2UpLmFkZCgiYmFja2dyb3VuZFRpbGVzZXQiLCBiYWNrZ3JvdW5kVGlsZXNldEltYWdlKS5sb2FkKGZ1bmN0aW9uIChsb2FkZXIsIHJlc291cmNlcykgewogICAgICAvL2Nyb3AgdGlsZXNldHMgdG8gZ2V0IHRpbGVzIHRleHR1cmVzCiAgICAgIHZhciB0ZXh0dXJlcyA9IHsKICAgICAgICBwYXRoczogW10sCiAgICAgICAgc3RhdGlvbnM6IFtdLAogICAgICAgIHN0cmVldHM6IFtdLAogICAgICAgIGJ1aWxkaW5nczogW10sCiAgICAgICAgYmFja2dyb3VuZHM6IFtdCiAgICAgIH07CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbGVzZXRzRGltZW5zaW9uLnBhdGhzLndpZHRoICogdGlsZXNldHNEaW1lbnNpb24ucGF0aHMuaGVpZ2h0OyBpKyspIHsKICAgICAgICB2YXIgeCA9IGkgJSB0aWxlc2V0c0RpbWVuc2lvbi5wYXRocy53aWR0aDsKICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoaSAvIHRpbGVzZXRzRGltZW5zaW9uLnBhdGhzLndpZHRoKTsKICAgICAgICB0ZXh0dXJlcy5wYXRoc1tpXSA9IG5ldyBQSVhJLlRleHR1cmUocmVzb3VyY2VzLnBhdGhzVGlsZXNldC50ZXh0dXJlLCBuZXcgUElYSS5SZWN0YW5nbGUoeCAqIHRpbGVTaXplLCB5ICogdGlsZVNpemUsIHRpbGVTaXplLCB0aWxlU2l6ZSkpOwogICAgICB9CgogICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgdGlsZXNldHNEaW1lbnNpb24uc3RhdGlvbnMud2lkdGggKiB0aWxlc2V0c0RpbWVuc2lvbi5zdGF0aW9ucy5oZWlnaHQ7IF9pKyspIHsKICAgICAgICB2YXIgX3ggPSBfaSAlIHRpbGVzZXRzRGltZW5zaW9uLnN0YXRpb25zLndpZHRoOwoKICAgICAgICB2YXIgX3kgPSBNYXRoLmZsb29yKF9pIC8gdGlsZXNldHNEaW1lbnNpb24uc3RhdGlvbnMud2lkdGgpOwoKICAgICAgICB0ZXh0dXJlcy5zdGF0aW9uc1tfaV0gPSBuZXcgUElYSS5UZXh0dXJlKHJlc291cmNlcy5zdGF0aW9uc1RpbGVzZXQudGV4dHVyZSwgbmV3IFBJWEkuUmVjdGFuZ2xlKF94ICogdGlsZVNpemUsIF95ICogdGlsZVNpemUsIHRpbGVTaXplLCB0aWxlU2l6ZSkpOwogICAgICB9CgogICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCB0aWxlc2V0c0RpbWVuc2lvbi5zdHJlZXRzLndpZHRoICogdGlsZXNldHNEaW1lbnNpb24uc3RyZWV0cy5oZWlnaHQ7IF9pMisrKSB7CiAgICAgICAgdmFyIF94MiA9IF9pMiAlIHRpbGVzZXRzRGltZW5zaW9uLnN0cmVldHMud2lkdGg7CgogICAgICAgIHZhciBfeTIgPSBNYXRoLmZsb29yKF9pMiAvIHRpbGVzZXRzRGltZW5zaW9uLnN0cmVldHMud2lkdGgpOwoKICAgICAgICB0ZXh0dXJlcy5zdHJlZXRzW19pMl0gPSBuZXcgUElYSS5UZXh0dXJlKHJlc291cmNlcy5zdHJlZXRzVGlsZXNldC50ZXh0dXJlLCBuZXcgUElYSS5SZWN0YW5nbGUoX3gyICogdGlsZVNpemUsIF95MiAqIHRpbGVTaXplLCB0aWxlU2l6ZSwgdGlsZVNpemUpKTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgdGlsZXNldHNEaW1lbnNpb24uYnVpbGRpbmdzLndpZHRoICogdGlsZXNldHNEaW1lbnNpb24uYnVpbGRpbmdzLmhlaWdodDsgX2kzKyspIHsKICAgICAgICB2YXIgX3gzID0gX2kzICUgdGlsZXNldHNEaW1lbnNpb24uYnVpbGRpbmdzLndpZHRoOwoKICAgICAgICB2YXIgX3kzID0gTWF0aC5mbG9vcihfaTMgLyB0aWxlc2V0c0RpbWVuc2lvbi5idWlsZGluZ3Mud2lkdGgpOwoKICAgICAgICB0ZXh0dXJlcy5idWlsZGluZ3NbX2kzXSA9IG5ldyBQSVhJLlRleHR1cmUocmVzb3VyY2VzLmJ1aWxkaW5nc1RpbGVzZXQudGV4dHVyZSwgbmV3IFBJWEkuUmVjdGFuZ2xlKF94MyAqIHRpbGVTaXplLCBfeTMgKiB0aWxlU2l6ZSwgdGlsZVNpemUsIHRpbGVTaXplKSk7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IHRpbGVzZXRzRGltZW5zaW9uLmJhY2tncm91bmQud2lkdGggKiB0aWxlc2V0c0RpbWVuc2lvbi5iYWNrZ3JvdW5kLmhlaWdodDsgX2k0KyspIHsKICAgICAgICB2YXIgX3g0ID0gX2k0ICUgdGlsZXNldHNEaW1lbnNpb24uYmFja2dyb3VuZC53aWR0aDsKCiAgICAgICAgdmFyIF95NCA9IE1hdGguZmxvb3IoX2k0IC8gdGlsZXNldHNEaW1lbnNpb24uYmFja2dyb3VuZC53aWR0aCk7CgogICAgICAgIHRleHR1cmVzLmJhY2tncm91bmRzW19pNF0gPSBuZXcgUElYSS5UZXh0dXJlKHJlc291cmNlcy5iYWNrZ3JvdW5kVGlsZXNldC50ZXh0dXJlLCBuZXcgUElYSS5SZWN0YW5nbGUoX3g0ICogdGlsZVNpemUsIF95NCAqIHRpbGVTaXplLCB0aWxlU2l6ZSwgdGlsZVNpemUpKTsKICAgICAgfQoKICAgICAgdmFyIHBhdGhzQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7CiAgICAgIHZhciBzdHJlZXRzQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7CiAgICAgIHZhciBidWlsZGluZ3NDb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTsKICAgICAgdmFyIGJhY2tncm91bmRDb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTsKCiAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1hcERpbWVuc2lvbi5oZWlnaHQ7IHJvdysrKSB7CiAgICAgICAgZm9yICh2YXIgY29sID0gMDsgY29sIDwgbWFwRGltZW5zaW9uLndpZHRoOyBjb2wrKykgewogICAgICAgICAgdmFyIHBhdGhUZXh0dXJlID0gdGV4dHVyZXMucGF0aHNbcGF0aHNbcm93XVtjb2xdXTsKICAgICAgICAgIHZhciBwYXRoU3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKHBhdGhUZXh0dXJlKTsKICAgICAgICAgIHBhdGhTcHJpdGUueCA9IHRpbGVTaXplICogY29sOwogICAgICAgICAgcGF0aFNwcml0ZS55ID0gdGlsZVNpemUgKiByb3c7CiAgICAgICAgICBwYXRoc0NvbnRhaW5lci5hZGRDaGlsZChwYXRoU3ByaXRlKTsKICAgICAgICAgIHZhciBzdHJlZXRzVGV4dHVyZSA9IHRleHR1cmVzLnN0cmVldHNbc3RyZWV0c1tyb3ddW2NvbF1dOwogICAgICAgICAgdmFyIHN0cmVldHNTcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUoc3RyZWV0c1RleHR1cmUpOwogICAgICAgICAgc3RyZWV0c1Nwcml0ZS54ID0gdGlsZVNpemUgKiBjb2w7CiAgICAgICAgICBzdHJlZXRzU3ByaXRlLnkgPSB0aWxlU2l6ZSAqIHJvdzsKICAgICAgICAgIHN0cmVldHNDb250YWluZXIuYWRkQ2hpbGQoc3RyZWV0c1Nwcml0ZSk7CiAgICAgICAgICB2YXIgYnVpbGRpbmdzVGV4dHVyZSA9IHRleHR1cmVzLmJ1aWxkaW5nc1tidWlsZGluZ3Nbcm93XVtjb2xdXTsKICAgICAgICAgIHZhciBidWlsZGluZ3NTcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUoYnVpbGRpbmdzVGV4dHVyZSk7CiAgICAgICAgICBidWlsZGluZ3NTcHJpdGUueCA9IHRpbGVTaXplICogY29sOwogICAgICAgICAgYnVpbGRpbmdzU3ByaXRlLnkgPSB0aWxlU2l6ZSAqIHJvdzsKICAgICAgICAgIGJ1aWxkaW5nc0NvbnRhaW5lci5hZGRDaGlsZChidWlsZGluZ3NTcHJpdGUpOwogICAgICAgICAgdmFyIGJhY2tncm91bmRUZXh0dXJlID0gdGV4dHVyZXMuYmFja2dyb3VuZHNbYmFja2dyb3VuZFtyb3ddW2NvbF1dOwogICAgICAgICAgdmFyIGJhY2tncm91bmRTcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUoYmFja2dyb3VuZFRleHR1cmUpOwogICAgICAgICAgYmFja2dyb3VuZFNwcml0ZS54ID0gdGlsZVNpemUgKiBjb2w7CiAgICAgICAgICBiYWNrZ3JvdW5kU3ByaXRlLnkgPSB0aWxlU2l6ZSAqIHJvdzsKICAgICAgICAgIGJhY2tncm91bmRDb250YWluZXIuYWRkQ2hpbGQoYmFja2dyb3VuZFNwcml0ZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBhcHAuc3RhZ2UuYWRkQ2hpbGQoYmFja2dyb3VuZENvbnRhaW5lcik7CiAgICAgIGFwcC5zdGFnZS5hZGRDaGlsZChidWlsZGluZ3NDb250YWluZXIpOwogICAgICBhcHAuc3RhZ2UuYWRkQ2hpbGQoc3RyZWV0c0NvbnRhaW5lcik7CiAgICAgIGFwcC5zdGFnZS5hZGRDaGlsZChwYXRoc0NvbnRhaW5lcik7CiAgICAgIGFwcC5zdGFnZS5hZGRDaGlsZChnZXRDb250YWluZXJGcm9tU3RhdGlvbnMoc3RhdGlvbnMsIHRpbGVTaXplLCB0ZXh0dXJlcy5zdGF0aW9ucykpOwogICAgICB2YXIgcGF3bnNDb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTsKICAgICAgcHJvcHMucGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChwbGF5ZXIpIHsKICAgICAgICB2YXIgdGV4dHVyZSA9IHRleHR1cmVzLnN0YXRpb25zW3BsYXllci5jb2xvciArIDRdOwogICAgICAgIHZhciBzcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7CgogICAgICAgIGlmIChwbGF5ZXIucG9zaXRpb24pIHsKICAgICAgICAgIHZhciBwb2ludCA9IHN0YXRpb25zW3BsYXllci5wb3NpdGlvbiAtIDFdLnBvaW50OwogICAgICAgICAgc3ByaXRlLnggPSBwb2ludFswXSAqIHRpbGVTaXplOwogICAgICAgICAgc3ByaXRlLnkgPSBwb2ludFsxXSAqIHRpbGVTaXplOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzcHJpdGUudmlzaWJsZSA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcGF3bnNDb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlKTsKICAgICAgfSk7CiAgICAgIGFwcC5zdGFnZS5hZGRDaGlsZChwYXduc0NvbnRhaW5lcik7CiAgICAgIGFwcC50aWNrZXIuYWRkKGZ1bmN0aW9uICgpIHsKICAgICAgICBwcm9wcy5wbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKHBsYXllciwgaW5kZXgpIHsKICAgICAgICAgIHZhciBzcHJpdGUgPSBwYXduc0NvbnRhaW5lci5jaGlsZHJlbltpbmRleF07CgogICAgICAgICAgaWYgKHBsYXllci5wb3NpdGlvbikgewogICAgICAgICAgICBzcHJpdGUudmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIHZhciBwb2ludCA9IHN0YXRpb25zW3BsYXllci5wb3NpdGlvbiAtIDFdLnBvaW50OwogICAgICAgICAgICBzcHJpdGUueCA9IHBvaW50WzBdICogdGlsZVNpemU7CiAgICAgICAgICAgIHNwcml0ZS55ID0gcG9pbnRbMV0gKiB0aWxlU2l6ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNwcml0ZS52aXNpYmxlID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CiAgICBhcHAubG9hZGVyLm9uRXJyb3IuYWRkKGZ1bmN0aW9uIChlKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICB9KTsKICAgIG9uTW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYXAtbWFuYWdlcl9fbWFpbi1wYW5lbCIpLmFwcGVuZENoaWxkKGFwcC52aWV3KTsKICAgICAgdmFyIGRyYWdnaW5nID0gcmVmKGZhbHNlKTsKICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYXAtbWFuYWdlcl9fbWFpbi1wYW5lbCIpOwogICAgICB2YXIgaW5zdGFuY2UgPSByZW5kZXJlcih7CiAgICAgICAgbWluU2NhbGU6IG1pblpvb20sCiAgICAgICAgbWF4U2NhbGU6IG1heFpvb20sCiAgICAgICAgZWxlbWVudDogY29udGFpbmVyLmNoaWxkcmVuWzBdLAogICAgICAgIHNjYWxlU2Vuc2l0aXZpdHk6IHpvb21TZW5zaWJpbGl0eQogICAgICB9KTsKICAgICAgaW5zdGFuY2Uuem9vbSh7CiAgICAgICAgZGVsdGFTY2FsZTogLTExLAogICAgICAgIHg6IHdpbmRvdy5pbm5lcldpZHRoIC8gNTAsCiAgICAgICAgeTogd2luZG93LmlubmVySGVpZ2h0IC8gMjAKICAgICAgfSk7CiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCJ3aGVlbCIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGlmIChldmVudC5jdHJsS2V5KSByZXR1cm47CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICBpbnN0YW5jZS56b29tKHsKICAgICAgICAgIGRlbHRhU2NhbGU6IE1hdGguc2lnbihldmVudC5kZWx0YVkpLAogICAgICAgICAgeDogZXZlbnQucGFnZVgsCiAgICAgICAgICB5OiBldmVudC5wYWdlWQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdmFyIGRhdGU7CiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgZHJhZ2dpbmcudmFsdWUgPSB0cnVlOwogICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gIm1vdmUiOwogICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgfSk7CiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBpZiAoIWRyYWdnaW5nLnZhbHVlKSByZXR1cm47CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICBpbnN0YW5jZS5wYW5CeSh7CiAgICAgICAgICBvcmlnaW5YOiBldmVudC5tb3ZlbWVudFgsCiAgICAgICAgICBvcmlnaW5ZOiBldmVudC5tb3ZlbWVudFkKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgZHJhZ2dpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICJkZWZhdWx0IjsKCiAgICAgICAgaWYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gZGF0ZSA8IDEwMDApIHsKICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihldmVudC5vZmZzZXRYIC8gdGlsZVNpemUpOwogICAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKGV2ZW50Lm9mZnNldFkgLyB0aWxlU2l6ZSk7CiAgICAgICAgICB2YXIgY2xpY2tlZCA9IGZpbmRTdGF0aW9uQnlQb3NpdGlvbih4LCB5LCBzdGF0aW9ucyk7CiAgICAgICAgICBpZiAoY2xpY2tlZCkgY3R4LmVtaXQoInN0YXRpb24tY2xpY2tlZCIsIGNsaWNrZWQubnVtYmVyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB2YXIgcHJldmlvdXNUb3VjaDsKICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoc3RhcnQiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgIHByZXZpb3VzVG91Y2ggPSBldmVudDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICB2YXIgZHggPSBldmVudC50b3VjaGVzWzBdLnBhZ2VYIC0gcHJldmlvdXNUb3VjaC50b3VjaGVzWzBdLnBhZ2VYOwogICAgICAgICAgdmFyIGR5ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWSAtIHByZXZpb3VzVG91Y2gudG91Y2hlc1swXS5wYWdlWTsKICAgICAgICAgIGluc3RhbmNlLnBhbkJ5KHsKICAgICAgICAgICAgb3JpZ2luWDogZHgsCiAgICAgICAgICAgIG9yaWdpblk6IGR5CiAgICAgICAgICB9KTsKICAgICAgICAgIHByZXZpb3VzVG91Y2ggPSBldmVudDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hlbmQiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgIHByZXZpb3VzVG91Y2ggPSBudWxsOwoKICAgICAgICAgIGlmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGRhdGUgPCAxMDAwKSB7CiAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihldmVudC5vZmZzZXRYIC8gdGlsZVNpemUpOwogICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoZXZlbnQub2Zmc2V0WSAvIHRpbGVTaXplKTsKICAgICAgICAgICAgdmFyIGNsaWNrZWQgPSBmaW5kU3RhdGlvbkJ5UG9zaXRpb24oeCwgeSwgc3RhdGlvbnMpOwogICAgICAgICAgICBpZiAoY2xpY2tlZCkgY3R4LmVtaXQoInN0YXRpb24tY2xpY2tlZCIsIGNsaWNrZWQubnVtYmVyKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHJldHVybiBrZXlQcmVzc2VkKGV2ZW50LCBpbnN0YW5jZSk7CiAgICAgIH0pOwogICAgICBjdHguZW1pdCgibWFwLW1hbmFnZXItbG9hZGVkIik7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/components/gamePhaseComponents/MapManager.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"map-manager__main-panel\" id=\"map-manager__main-panel\"></div>\r\n</template>\r\n\r\n<script>\r\nimport *  as PIXI from \"pixi.js-legacy\";\r\nimport {\r\n  findStationByPosition,\r\n  getContainerFromStations,\r\n  keyPressed,\r\n  tilesetsDimension,\r\n  mapDimension,\r\n  maxZoom,\r\n  minZoom,\r\n  tileSize,\r\n  zoomSensibility\r\n} from \"../../constants/mapConstants\";\r\nimport stations from \"../../constants/stations\";\r\nimport {onMounted, ref} from \"vue\";\r\nimport pathsTilesetImage from \"../../assets/tilesets/pathsTileset.png\";\r\nimport stationsTilesetImage from \"../../assets/tilesets/stationsTileset.png\";\r\nimport streetsTilesetImage from \"../../assets/tilesets/streetsTileset.png\";\r\nimport buildingsTilesetImage from \"../../assets/tilesets/buildingsTileset.png\";\r\nimport backgroundTilesetImage from \"../../assets/tilesets/backgroundTileset.png\";\r\nimport paths from \"../../constants/paths\";\r\nimport streets from \"../../constants/streets\";\r\nimport buildings from \"../../constants/buildings\";\r\nimport background from \"../../constants/background\";\r\n\r\nimport renderer from \"../../modules/renderer\";\r\nexport default {\r\n  name: \"MapManager\",\r\n  props: {\r\n    players: Array\r\n  },\r\n  setup(props, ctx) {\r\n    const app = new PIXI.Application({\r\n      width: tileSize * mapDimension.width,\r\n      height: tileSize * mapDimension.height,\r\n      transparent: true,\r\n      antialias: false\r\n    });\r\n\r\n    PIXI.settings.ROUND_PIXELS = true;\r\n\r\n    app.loader\r\n        .add(\"pathsTileset\", pathsTilesetImage)\r\n        .add(\"stationsTileset\", stationsTilesetImage)\r\n        .add(\"streetsTileset\", streetsTilesetImage)\r\n        .add(\"buildingsTileset\", buildingsTilesetImage)\r\n        .add(\"backgroundTileset\", backgroundTilesetImage)\r\n        .load((loader, resources) => {\r\n\r\n          //crop tilesets to get tiles textures\r\n          let textures = {\r\n            paths: [],\r\n            stations: [],\r\n            streets: [],\r\n            buildings: [],\r\n            backgrounds: []\r\n          }\r\n\r\n          for (let i = 0; i < tilesetsDimension.paths.width * tilesetsDimension.paths.height; i++) {\r\n            let x = i % tilesetsDimension.paths.width;\r\n            let y = Math.floor(i / tilesetsDimension.paths.width);\r\n            textures.paths[i] = new PIXI.Texture(\r\n                resources.pathsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          for (let i = 0; i < tilesetsDimension.stations.width * tilesetsDimension.stations.height; i++) {\r\n            let x = i % tilesetsDimension.stations.width;\r\n            let y = Math.floor(i / tilesetsDimension.stations.width);\r\n            textures.stations[i] = new PIXI.Texture(\r\n                resources.stationsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          for (let i = 0; i < tilesetsDimension.streets.width * tilesetsDimension.streets.height; i++) {\r\n            let x = i % tilesetsDimension.streets.width;\r\n            let y = Math.floor(i / tilesetsDimension.streets.width);\r\n            textures.streets[i] = new PIXI.Texture(\r\n                resources.streetsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          for (let i = 0; i < tilesetsDimension.buildings.width * tilesetsDimension.buildings.height; i++) {\r\n            let x = i % tilesetsDimension.buildings.width;\r\n            let y = Math.floor(i / tilesetsDimension.buildings.width);\r\n            textures.buildings[i] = new PIXI.Texture(\r\n                resources.buildingsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          for (let i = 0; i < tilesetsDimension.background.width * tilesetsDimension.background.height; i++) {\r\n            let x = i % tilesetsDimension.background.width;\r\n            let y = Math.floor(i / tilesetsDimension.background.width);\r\n            textures.backgrounds[i] = new PIXI.Texture(\r\n                resources.backgroundTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          let pathsContainer = new PIXI.Container();\r\n          let streetsContainer = new PIXI.Container();\r\n          let buildingsContainer = new PIXI.Container();\r\n          let backgroundContainer = new PIXI.Container();\r\n\r\n          for (let row = 0; row < mapDimension.height; row++){\r\n            for (let col = 0; col < mapDimension.width; col++){\r\n              let pathTexture = textures.paths[paths[row][col]];\r\n              let pathSprite = new PIXI.Sprite(pathTexture);\r\n              pathSprite.x = tileSize * col;\r\n              pathSprite.y = tileSize * row;\r\n              pathsContainer.addChild(pathSprite);\r\n\r\n              let streetsTexture = textures.streets[streets[row][col]];\r\n              let streetsSprite = new PIXI.Sprite(streetsTexture);\r\n              streetsSprite.x = tileSize * col;\r\n              streetsSprite.y = tileSize * row;\r\n              streetsContainer.addChild(streetsSprite);\r\n\r\n              let buildingsTexture = textures.buildings[buildings[row][col]];\r\n              let buildingsSprite = new PIXI.Sprite(buildingsTexture);\r\n              buildingsSprite.x = tileSize * col;\r\n              buildingsSprite.y = tileSize * row;\r\n              buildingsContainer.addChild(buildingsSprite);\r\n\r\n              let backgroundTexture = textures.backgrounds[background[row][col]];\r\n              let backgroundSprite = new PIXI.Sprite(backgroundTexture);\r\n              backgroundSprite.x = tileSize * col;\r\n              backgroundSprite.y = tileSize * row;\r\n              backgroundContainer.addChild(backgroundSprite);\r\n            }\r\n          }\r\n\r\n          app.stage.addChild(backgroundContainer);\r\n          app.stage.addChild(buildingsContainer);\r\n          app.stage.addChild(streetsContainer);\r\n          app.stage.addChild(pathsContainer);\r\n          app.stage.addChild(getContainerFromStations(stations, tileSize, textures.stations));\r\n\r\n          let pawnsContainer = new PIXI.Container();\r\n          props.players.forEach(player => {\r\n            let texture = textures.stations[player.color+4];\r\n            let sprite = new PIXI.Sprite(texture);\r\n            if(player.position) {\r\n              let point = stations[player.position - 1].point;\r\n              sprite.x = point[0] * tileSize;\r\n              sprite.y = point[1] * tileSize;\r\n            } else {\r\n              sprite.visible = false;\r\n            }\r\n            pawnsContainer.addChild(sprite);\r\n          });\r\n\r\n          app.stage.addChild(pawnsContainer);\r\n\r\n          app.ticker.add(()=>{\r\n            props.players.forEach( (player, index) => {\r\n              let sprite = pawnsContainer.children[index];\r\n              if(player.position) {\r\n                sprite.visible = true;\r\n                let point = stations[player.position - 1].point;\r\n                sprite.x = point[0] * tileSize;\r\n                sprite.y = point[1] * tileSize;\r\n              } else {\r\n                sprite.visible = false;\r\n              }\r\n            });\r\n          })\r\n        });\r\n\r\n    app.loader.onError.add((e)=>{\r\n      console.error(e);\r\n    });\r\n\r\n    onMounted(() => {\r\n      document.getElementById(\"map-manager__main-panel\").appendChild(app.view);\r\n      const dragging = ref(false);\r\n\r\n      const container = document.getElementById(\"map-manager__main-panel\");\r\n      const instance = renderer({\r\n        minScale: minZoom,\r\n        maxScale: maxZoom,\r\n        element: container.children[0],\r\n        scaleSensitivity: zoomSensibility\r\n      });\r\n\r\n      instance.zoom({\r\n        deltaScale: -11,\r\n        x: window.innerWidth/50,\r\n        y: window.innerHeight/20\r\n      })\r\n\r\n      container.addEventListener(\"wheel\", (event) => {\r\n        if (event.ctrlKey) return;\r\n        event.preventDefault();\r\n        instance.zoom({\r\n          deltaScale: Math.sign(event.deltaY),\r\n          x: event.pageX,\r\n          y: event.pageY\r\n        });\r\n      });\r\n\r\n      let date;\r\n      container.addEventListener(\"mousedown\", () => {\r\n        dragging.value = true;\r\n        document.body.style.cursor = \"move\";\r\n        date = new Date().getTime();\r\n      });\r\n\r\n      container.addEventListener(\"mousemove\", (event) => {\r\n        if (!dragging.value) return;\r\n        event.preventDefault();\r\n        instance.panBy({\r\n          originX: event.movementX,\r\n          originY: event.movementY\r\n        });\r\n      });\r\n\r\n      container.addEventListener(\"mouseup\", (event) => {\r\n        dragging.value = false;\r\n        document.body.style.cursor = \"default\";\r\n        if (new Date().getTime() - date < 1000) {\r\n          let x = Math.floor(event.offsetX/tileSize);\r\n          let y = Math.floor(event.offsetY/tileSize);\r\n          let clicked = findStationByPosition(x, y, stations);\r\n          if(clicked) ctx.emit(\"station-clicked\", clicked.number);\r\n        }\r\n      });\r\n\r\n      let previousTouch;\r\n      container.addEventListener(\"touchstart\", (event) => {\r\n        if(event.touches.length === 1) {\r\n          date = new Date().getTime();\r\n          previousTouch = event;\r\n        }\r\n      });\r\n\r\n      container.addEventListener(\"touchmove\", (event) => {\r\n        if(event.touches.length === 1){\r\n          let dx = event.touches[0].pageX-previousTouch.touches[0].pageX;\r\n          let dy = event.touches[0].pageY-previousTouch.touches[0].pageY;\r\n          instance.panBy({\r\n            originX: dx,\r\n            originY: dy\r\n          });\r\n          previousTouch = event;\r\n        }\r\n      });\r\n\r\n      container.addEventListener(\"touchend\", (event) => {\r\n        if (event.touches.length === 1){\r\n          previousTouch = null;\r\n          if (new Date().getTime() - date < 1000) {\r\n            let x = Math.floor(event.offsetX/tileSize);\r\n            let y = Math.floor(event.offsetY/tileSize);\r\n            let clicked = findStationByPosition(x, y, stations);\r\n\r\n\r\n            if(clicked) ctx.emit(\"station-clicked\", clicked.number);\r\n          }\r\n        }\r\n      });\r\n\r\n      window.addEventListener(\"keydown\", (event) => keyPressed(event, instance));\r\n\r\n      ctx.emit(\"map-manager-loaded\");\r\n    });\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.map-manager__main-panel{\r\n  overflow: hidden;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 0 20px 20px 0;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}