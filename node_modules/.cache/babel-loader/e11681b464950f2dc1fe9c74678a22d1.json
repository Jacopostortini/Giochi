{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js","mtime":1613932092838},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js","mtime":1612540687689},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/eslint-loader/index.js","mtime":1612540687937}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL3Vuc2Vlbi5wYXBlcm8udGsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBjcmVhdGVSb3V0ZXIsIGNyZWF0ZVdlYkhpc3RvcnkgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IEhvbWUgZnJvbSAiLi4vdmlld3MvSG9tZSI7CmltcG9ydCBHYW1lIGZyb20gIi4uL3ZpZXdzL0dhbWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgeyBjcmVhdGVMb2NhbEFjY291bnRVcmwsIGdldExvZ2luSW5mb1VybCB9IGZyb20gIi4uL2NvbnN0YW50cy9jb25zdGFudHMiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi4vc3RvcmUiOwp2YXIgcm91dGVzID0gW3sKICBwYXRoOiAnL3Vuc2VlbicsCiAgbmFtZTogJ0hvbWUnLAogIGNvbXBvbmVudDogSG9tZQp9LCB7CiAgcGF0aDogJy91bnNlZW4vOmdhbWVJZCcsCiAgbmFtZTogJ0dhbWUnLAogIGNvbXBvbmVudDogR2FtZQp9XTsKdmFyIHJvdXRlciA9IGNyZWF0ZVJvdXRlcih7CiAgaGlzdG9yeTogY3JlYXRlV2ViSGlzdG9yeSgpLAogIGJhc2U6ICJ1bnNlZW4iLAogIHJvdXRlczogcm91dGVzCn0pOwpyb3V0ZXIuYmVmb3JlRWFjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0bywgZnJvbSwgbmV4dCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBuZXh0KHRvKTsKCiAgICAgICAgICAgIGlmIChzdG9yZS5zdGF0ZS51c2VybmFtZSA9PT0gIiIgJiYgc3RvcmUuc3RhdGUubG9nZ2VkID09PSAtMSkgewogICAgICAgICAgICAgIC8vc2Ugbm9uIMOoIGFuY29yYSBzdGF0byB0cm92YXRvIGlsIGxvZ2dlZAogICAgICAgICAgICAgIGF4aW9zLmdldChnZXRMb2dpbkluZm9VcmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgICAvL3NlIMOoIGxvZ2dhdG8gaW4gcXVhbGNoZSBtb2RvCiAgICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCJzZXRMb2dnZWQiLCByZXNwb25zZS5kYXRhLmdvb2dsZV9zaWduZWRfaW4pOwogICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0VXNlcm5hbWUiLCBkZWNvZGVVUklDb21wb25lbnQocmVzcG9uc2UuZGF0YS51c2VybmFtZSkpOwogICAgICAgICAgICAgICAgICBuZXh0KCk7IC8vc2Ugw6ggbG9nZ2F0byBpbiBxdWFsY2hlIG1vZG8gcHXDsiBhbmRhcmUgZG92ZSB2dW9sZQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy9zZSBub24gw6ggbG9nZ2F0bwogICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0VXNlcm5hbWUiLCBudWxsKTsKICAgICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldExvZ2dlZCIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgICAgIGlmICh0by5uYW1lID09PSAiR2FtZSIpIHsKICAgICAgICAgICAgICAgICAgICAvL3NlIHN0YSBhbmRhbmRvIGluIHVuYSBwYXJ0aXRhCiAgICAgICAgICAgICAgICAgICAgYXhpb3MuZ2V0KGNyZWF0ZUxvY2FsQWNjb3VudFVybCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICB0bygpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgbmV4dCgpOyAvL3NlIG5vbiBzdGEgYW5kYW5kbyBpbiB1bmEgcGFydGl0YSBub24gYyfDqCBiaXNvZ25vIGRlbGwnYWNjb3VudAoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoc3RvcmUuc3RhdHVzLnVzZXJuYW1lID09PSBudWxsICYmIHRvLm5hbWUgPT09ICJHYW1lIikgewogICAgICAgICAgICAgICAgLy9zZSBub24gw6ggbG9nZ2F0byBlIHN0YSBhbmRhbmRvIGluIHBhcnRpdGEKICAgICAgICAgICAgICAgIGF4aW9zLmdldChjcmVhdGVMb2NhbEFjY291bnRVcmwpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB0bygpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIG5leHQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js"],"names":["createRouter","createWebHistory","Home","Game","axios","createLocalAccountUrl","getLoginInfoUrl","store","routes","path","name","component","router","history","base","beforeEach","to","from","next","state","username","logged","get","then","response","data","dispatch","google_signed_in","decodeURIComponent","status"],"mappings":";;;AAAA,SAASA,YAAT,EAAuBC,gBAAvB,QAA+C,YAA/C;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,qBAAR,EAA+BC,eAA/B,QAAqD,wBAArD;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAGA,IAAMC,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,SADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,SAAS,EAAET;AAHb,CADa,EAMb;AACEO,EAAAA,IAAI,EAAE,iBADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,SAAS,EAAER;AAHb,CANa,CAAf;AAaA,IAAMS,MAAM,GAAGZ,YAAY,CAAC;AAC1Ba,EAAAA,OAAO,EAAEZ,gBAAgB,EADC;AAE1Ba,EAAAA,IAAI,EAAE,QAFoB;AAG1BN,EAAAA,MAAM,EAANA;AAH0B,CAAD,CAA3B;AAMAI,MAAM,CAACG,UAAP;AAAA,qEAAkB,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AACdA,YAAAA,IAAI,CAACF,EAAD,CAAJ;;AACF,gBAAGT,KAAK,CAACY,KAAN,CAAYC,QAAZ,KAAyB,EAAzB,IAA+Bb,KAAK,CAACY,KAAN,CAAYE,MAAZ,KAAuB,CAAC,CAA1D,EAA4D;AAAE;AAC5DjB,cAAAA,KAAK,CACAkB,GADL,CACShB,eADT,EAEKiB,IAFL,CAEU,UAACC,QAAD,EAAY;AAChB,oBAAGA,QAAQ,CAACC,IAAZ,EAAiB;AAAE;AACjBlB,kBAAAA,KAAK,CAACmB,QAAN,CAAe,WAAf,EAA4BF,QAAQ,CAACC,IAAT,CAAcE,gBAA1C;AACApB,kBAAAA,KAAK,CAACmB,QAAN,CAAe,aAAf,EAA8BE,kBAAkB,CAACJ,QAAQ,CAACC,IAAT,CAAcL,QAAf,CAAhD;AAEAF,kBAAAA,IAAI,GAJW,CAIP;AAET,iBAND,MAMO;AAAE;AACPX,kBAAAA,KAAK,CAACmB,QAAN,CAAe,aAAf,EAA8B,IAA9B;AACAnB,kBAAAA,KAAK,CAACmB,QAAN,CAAe,WAAf,EAA4B,KAA5B;;AAEA,sBAAGV,EAAE,CAACN,IAAH,KAAU,MAAb,EAAoB;AAAE;AACpBN,oBAAAA,KAAK,CACAkB,GADL,CACSjB,qBADT,EAEKkB,IAFL,CAEU,YAAI;AACNP,sBAAAA,EAAE;AACL,qBAJL;AAKD,mBAND,MAMOE,IAAI,GAVN,CAUU;;AAEhB;AACF,eAtBL;AAuBD,aAxBD,MAwBO;AACH,kBAAGX,KAAK,CAACsB,MAAN,CAAaT,QAAb,KAA0B,IAA1B,IAAkCJ,EAAE,CAACN,IAAH,KAAY,MAAjD,EAAwD;AAAE;AACtDN,gBAAAA,KAAK,CACAkB,GADL,CACSjB,qBADT,EAEKkB,IAFL,CAEU,YAAI;AACNP,kBAAAA,EAAE;AACL,iBAJL;AAKH,eAND,MAMOE,IAAI;AACd;;AAlCe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA;AAqCA,eAAeN,MAAf","sourcesContent":["import { createRouter, createWebHistory } from 'vue-router';\nimport Home from \"../views/Home\";\nimport Game from \"../views/Game\";\nimport axios from \"axios\";\nimport {createLocalAccountUrl, getLoginInfoUrl} from \"../constants/constants\";\nimport store from \"../store\";\n\n\nconst routes = [\n  {\n    path: '/unseen',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/unseen/:gameId',\n    name: 'Game',\n    component: Game\n  }\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  base: \"unseen\",\n  routes\n});\n\nrouter.beforeEach(async (to, from, next)=>{\n    next(to)\n  if(store.state.username === \"\" && store.state.logged === -1){ //se non è ancora stato trovato il logged\n    axios\n        .get(getLoginInfoUrl)\n        .then((response)=>{\n          if(response.data){ //se è loggato in qualche modo\n            store.dispatch(\"setLogged\", response.data.google_signed_in);\n            store.dispatch(\"setUsername\", decodeURIComponent(response.data.username));\n\n            next(); //se è loggato in qualche modo può andare dove vuole\n\n          } else { //se non è loggato\n            store.dispatch(\"setUsername\", null);\n            store.dispatch(\"setLogged\", false);\n\n            if(to.name===\"Game\"){ //se sta andando in una partita\n              axios\n                  .get(createLocalAccountUrl)\n                  .then(()=>{\n                      to();\n                  });\n            } else next(); //se non sta andando in una partita non c'è bisogno dell'account\n\n          }\n        });\n  } else {\n      if(store.status.username === null && to.name === \"Game\"){ //se non è loggato e sta andando in partita\n          axios\n              .get(createLocalAccountUrl)\n              .then(()=>{\n                  to();\n              });\n      } else next();\n  }\n})\n\nexport default router\n"]}]}