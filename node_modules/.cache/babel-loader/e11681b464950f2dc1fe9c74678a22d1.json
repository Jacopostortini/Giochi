{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js","mtime":1613151745789},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js","mtime":1612540687689},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/eslint-loader/index.js","mtime":1612540687937}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL3Vuc2Vlbi5wYXBlcm8udGsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwoKdmFyIF90aGlzID0gdGhpczsKCmltcG9ydCB7IGNyZWF0ZVJvdXRlciwgY3JlYXRlV2ViSGlzdG9yeSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgSG9tZSBmcm9tICIuLi92aWV3cy9Ib21lIjsKaW1wb3J0IEdhbWUgZnJvbSAiLi4vdmlld3MvR2FtZSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGNyZWF0ZUxvY2FsQWNjb3VudFVybCwgZ2V0TG9naW5JbmZvVXJsIH0gZnJvbSAiLi4vY29uc3RhbnRzL2NvbnN0YW50cyI7CmltcG9ydCBzdG9yZSBmcm9tICIuLi9zdG9yZSI7CnZhciByb3V0ZXMgPSBbewogIHBhdGg6ICcvdW5zZWVuJywKICBuYW1lOiAnSG9tZScsCiAgY29tcG9uZW50OiBIb21lCn0sIHsKICBwYXRoOiAnL3Vuc2Vlbi86Z2FtZUlkJywKICBuYW1lOiAnR2FtZScsCiAgY29tcG9uZW50OiBHYW1lCn1dOwp2YXIgcm91dGVyID0gY3JlYXRlUm91dGVyKHsKICBoaXN0b3J5OiBjcmVhdGVXZWJIaXN0b3J5KCksCiAgYmFzZTogInVuc2VlbiIsCiAgcm91dGVzOiByb3V0ZXMKfSk7CnJvdXRlci5iZWZvcmVFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGF4aW9zLmdldChnZXRMb2dpbkluZm9VcmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgIC8vc2Ugw6ggbG9nZ2F0byBpbiBxdWFsY2hlIG1vZG8KICAgICAgICAgICAgICAgIF90aGlzLnN0b3JlLmRpc3BhdGNoKCJzZXRMb2dnZWQiLCByZXNwb25zZS5kYXRhLmdvb2dsZV9zaWduZWRfaW4pOwoKICAgICAgICAgICAgICAgIF90aGlzLnN0b3JlLmRpc3BhdGNoKCJzZXRVc2VybmFtZSIsIHJlc3BvbnNlLmRhdGEudXNlcm5hbWUpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvL3NlIG5vbiDDqCBsb2dnYXRvCiAgICAgICAgICAgICAgICBfdGhpcy5zdG9yZS5kaXNwYXRjaCgic2V0TG9nZ2VkIiwgZmFsc2UpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAodG8ubmFtZSA9PT0gIkdhbWUiKSB7CiAgICAgICAgICAgICAgLy9TZSDDqCBkaXJldHRvIGFkIHVuYSBwYXJ0aXRhCiAgICAgICAgICAgICAgaWYgKHN0b3JlLnN0YXRlLnVzZXJuYW1lKSBuZXh0KCk7IC8vc2Ugw6ggbG9nZ2F0byBjb24gYWNjb3VudCBsb2NhbCBvIGNvbiBnb29nbGUKICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy9zZSBub24gw6ggbG9nZ2F0byBuw6ggY29uIGdvb2dsZSBuw6ggY29uIGFjY291bnQgbG9jYWwKICAgICAgICAgICAgICAgICAgYXhpb3MuZ2V0KGNyZWF0ZUxvY2FsQWNjb3VudFVybCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIG5leHQoKTsgLy9TZSBub24gw6ggZGlyZXR0byBhZCB1bmEgcGFydGl0YQoKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js"],"names":["createRouter","createWebHistory","Home","Game","axios","createLocalAccountUrl","getLoginInfoUrl","store","routes","path","name","component","router","history","base","beforeEach","to","from","next","get","then","response","data","dispatch","google_signed_in","username","state"],"mappings":";;;;;;AAAA,SAASA,YAAT,EAAuBC,gBAAvB,QAA+C,YAA/C;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,qBAAR,EAA+BC,eAA/B,QAAqD,wBAArD;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAGA,IAAMC,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,SADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,SAAS,EAAET;AAHb,CADa,EAMb;AACEO,EAAAA,IAAI,EAAE,iBADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,SAAS,EAAER;AAHb,CANa,CAAf;AAaA,IAAMS,MAAM,GAAGZ,YAAY,CAAC;AAC1Ba,EAAAA,OAAO,EAAEZ,gBAAgB,EADC;AAE1Ba,EAAAA,IAAI,EAAE,QAFoB;AAG1BN,EAAAA,MAAM,EAANA;AAH0B,CAAD,CAA3B;AAMAI,MAAM,CAACG,UAAP;AAAA,qEAAkB,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAChBd,YAAAA,KAAK,CACAe,GADL,CACSb,eADT,EAEKc,IAFL,CAEU,UAACC,QAAD,EAAY;AAChB,kBAAGA,QAAQ,CAACC,IAAZ,EAAiB;AAAE;AAEjB,gBAAA,KAAI,CAACf,KAAL,CAAWgB,QAAX,CAAoB,WAApB,EAAiCF,QAAQ,CAACC,IAAT,CAAcE,gBAA/C;;AACA,gBAAA,KAAI,CAACjB,KAAL,CAAWgB,QAAX,CAAoB,aAApB,EAAmCF,QAAQ,CAACC,IAAT,CAAcG,QAAjD;AACD,eAJD,MAIO;AAAE;AACP,gBAAA,KAAI,CAAClB,KAAL,CAAWgB,QAAX,CAAoB,WAApB,EAAiC,KAAjC;AACD;AACF,aAVL;;AAWA,gBAAGP,EAAE,CAACN,IAAH,KAAU,MAAb,EAAoB;AAAE;AACpB,kBAAGH,KAAK,CAACmB,KAAN,CAAYD,QAAf,EAAyBP,IAAI,GAA7B,CAAiC;AAAjC,mBACK;AAAE;AACLd,kBAAAA,KAAK,CACAe,GADL,CACSd,qBADT,EAEKe,IAFL,CAEU,YAAI;AAACF,oBAAAA,IAAI;AAAG,mBAFtB;AAGD;AACF,aAPD,MAOOA,IAAI,GAnBK,CAmBD;;;AAnBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA;AAsBA,eAAeN,MAAf","sourcesContent":["import { createRouter, createWebHistory } from 'vue-router';\nimport Home from \"../views/Home\";\nimport Game from \"../views/Game\";\nimport axios from \"axios\";\nimport {createLocalAccountUrl, getLoginInfoUrl} from \"../constants/constants\";\nimport store from \"../store\";\n\n\nconst routes = [\n  {\n    path: '/unseen',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/unseen/:gameId',\n    name: 'Game',\n    component: Game\n  }\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  base: \"unseen\",\n  routes\n});\n\nrouter.beforeEach(async (to, from, next)=>{\n  axios\n      .get(getLoginInfoUrl)\n      .then((response)=>{\n        if(response.data){ //se è loggato in qualche modo\n          \n          this.store.dispatch(\"setLogged\", response.data.google_signed_in);\n          this.store.dispatch(\"setUsername\", response.data.username);\n        } else { //se non è loggato\n          this.store.dispatch(\"setLogged\", false);\n        }\n      });\n  if(to.name===\"Game\"){ //Se è diretto ad una partita\n    if(store.state.username) next(); //se è loggato con account local o con google\n    else { //se non è loggato nè con google nè con account local\n      axios\n          .get(createLocalAccountUrl)\n          .then(()=>{next()});\n    }\n  } else next(); //Se non è diretto ad una partita\n})\n\nexport default router\n"]}]}