{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js","mtime":1613153594922},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js","mtime":1612540687689},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/eslint-loader/index.js","mtime":1612540687937}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL3Vuc2Vlbi5wYXBlcm8udGsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBjcmVhdGVSb3V0ZXIsIGNyZWF0ZVdlYkhpc3RvcnkgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IEhvbWUgZnJvbSAiLi4vdmlld3MvSG9tZSI7CmltcG9ydCBHYW1lIGZyb20gIi4uL3ZpZXdzL0dhbWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgeyBjcmVhdGVMb2NhbEFjY291bnRVcmwsIGdldExvZ2luSW5mb1VybCB9IGZyb20gIi4uL2NvbnN0YW50cy9jb25zdGFudHMiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi4vc3RvcmUiOwp2YXIgcm91dGVzID0gW3sKICBwYXRoOiAnL3Vuc2VlbicsCiAgbmFtZTogJ0hvbWUnLAogIGNvbXBvbmVudDogSG9tZQp9LCB7CiAgcGF0aDogJy91bnNlZW4vOmdhbWVJZCcsCiAgbmFtZTogJ0dhbWUnLAogIGNvbXBvbmVudDogR2FtZQp9XTsKdmFyIHJvdXRlciA9IGNyZWF0ZVJvdXRlcih7CiAgaGlzdG9yeTogY3JlYXRlV2ViSGlzdG9yeSgpLAogIGJhc2U6ICJ1bnNlZW4iLAogIHJvdXRlczogcm91dGVzCn0pOwpyb3V0ZXIuYmVmb3JlRWFjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0bywgZnJvbSwgbmV4dCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBheGlvcy5nZXQoZ2V0TG9naW5JbmZvVXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICAvL3NlIMOoIGxvZ2dhdG8gaW4gcXVhbGNoZSBtb2RvCiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0TG9nZ2VkIiwgcmVzcG9uc2UuZGF0YS5nb29nbGVfc2lnbmVkX2luKTsKICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCJzZXRVc2VybmFtZSIsIHJlc3BvbnNlLmRhdGEudXNlcm5hbWUpOwogICAgICAgICAgICAgICAgbmV4dCgpOyAvL3NlIMOoIGxvZ2dhdG8gaW4gcXVhbGNoZSBtb2RvIHB1w7IgYW5kYXJlIGRvdmUgdnVvbGUKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy9zZSBub24gw6ggbG9nZ2F0bwogICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldExvZ2dlZCIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgICBpZiAodG8ubmFtZSA9PT0gIkdhbWUiKSB7CiAgICAgICAgICAgICAgICAgIC8vc2Ugc3RhIGFuZGFuZG8gaW4gdW5hIHBhcnRpdGEKICAgICAgICAgICAgICAgICAgYXhpb3MuZ2V0KGNyZWF0ZUxvY2FsQWNjb3VudFVybCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBuZXh0KCk7IC8vc2Ugbm9uIHN0YSBhbmRhbmRvIGluIHVuYSBwYXJ0aXRhIG5vbiBjJ8OoIGJpc29nbm8gZGVsbCdhY2NvdW50CgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js"],"names":["createRouter","createWebHistory","Home","Game","axios","createLocalAccountUrl","getLoginInfoUrl","store","routes","path","name","component","router","history","base","beforeEach","to","from","next","get","then","response","data","dispatch","google_signed_in","username"],"mappings":";;;AAAA,SAASA,YAAT,EAAuBC,gBAAvB,QAA+C,YAA/C;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,qBAAR,EAA+BC,eAA/B,QAAqD,wBAArD;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAGA,IAAMC,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,SADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,SAAS,EAAET;AAHb,CADa,EAMb;AACEO,EAAAA,IAAI,EAAE,iBADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,SAAS,EAAER;AAHb,CANa,CAAf;AAaA,IAAMS,MAAM,GAAGZ,YAAY,CAAC;AAC1Ba,EAAAA,OAAO,EAAEZ,gBAAgB,EADC;AAE1Ba,EAAAA,IAAI,EAAE,QAFoB;AAG1BN,EAAAA,MAAM,EAANA;AAH0B,CAAD,CAA3B;AAMAI,MAAM,CAACG,UAAP;AAAA,qEAAkB,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAChBd,YAAAA,KAAK,CACAe,GADL,CACSb,eADT,EAEKc,IAFL,CAEU,UAACC,QAAD,EAAY;AAChB,kBAAGA,QAAQ,CAACC,IAAZ,EAAiB;AAAE;AACjBf,gBAAAA,KAAK,CAACgB,QAAN,CAAe,WAAf,EAA4BF,QAAQ,CAACC,IAAT,CAAcE,gBAA1C;AACAjB,gBAAAA,KAAK,CAACgB,QAAN,CAAe,aAAf,EAA8BF,QAAQ,CAACC,IAAT,CAAcG,QAA5C;AAEAP,gBAAAA,IAAI,GAJW,CAIP;AAET,eAND,MAMO;AAAE;AACPX,gBAAAA,KAAK,CAACgB,QAAN,CAAe,WAAf,EAA4B,KAA5B;;AAEA,oBAAGP,EAAE,CAACN,IAAH,KAAU,MAAb,EAAoB;AAAE;AACpBN,kBAAAA,KAAK,CACAe,GADL,CACSd,qBADT,EAEKe,IAFL,CAEU,YAAI;AAACF,oBAAAA,IAAI;AAAG,mBAFtB;AAGD,iBAJD,MAIOA,IAAI,GAPN,CAOU;;AAEhB;AACF,aAnBL;;AADgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA;AAuBA,eAAeN,MAAf","sourcesContent":["import { createRouter, createWebHistory } from 'vue-router';\nimport Home from \"../views/Home\";\nimport Game from \"../views/Game\";\nimport axios from \"axios\";\nimport {createLocalAccountUrl, getLoginInfoUrl} from \"../constants/constants\";\nimport store from \"../store\";\n\n\nconst routes = [\n  {\n    path: '/unseen',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/unseen/:gameId',\n    name: 'Game',\n    component: Game\n  }\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  base: \"unseen\",\n  routes\n});\n\nrouter.beforeEach(async (to, from, next)=>{\n  axios\n      .get(getLoginInfoUrl)\n      .then((response)=>{\n        if(response.data){ //se è loggato in qualche modo\n          store.dispatch(\"setLogged\", response.data.google_signed_in);\n          store.dispatch(\"setUsername\", response.data.username);\n\n          next(); //se è loggato in qualche modo può andare dove vuole\n\n        } else { //se non è loggato\n          store.dispatch(\"setLogged\", false);\n\n          if(to.name===\"Game\"){ //se sta andando in una partita\n            axios\n                .get(createLocalAccountUrl)\n                .then(()=>{next()});\n          } else next(); //se non sta andando in una partita non c'è bisogno dell'account\n\n        }\n      });\n})\n\nexport default router\n"]}]}