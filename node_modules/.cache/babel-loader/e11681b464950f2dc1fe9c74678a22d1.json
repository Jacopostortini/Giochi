{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js","mtime":1613931365897},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js","mtime":1612540687689},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/eslint-loader/index.js","mtime":1612540687937}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL3Vuc2Vlbi5wYXBlcm8udGsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBjcmVhdGVSb3V0ZXIsIGNyZWF0ZVdlYkhpc3RvcnkgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IEhvbWUgZnJvbSAiLi4vdmlld3MvSG9tZSI7CmltcG9ydCBHYW1lIGZyb20gIi4uL3ZpZXdzL0dhbWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgeyBjcmVhdGVMb2NhbEFjY291bnRVcmwsIGdldExvZ2luSW5mb1VybCB9IGZyb20gIi4uL2NvbnN0YW50cy9jb25zdGFudHMiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi4vc3RvcmUiOwp2YXIgcm91dGVzID0gW3sKICBwYXRoOiAnL3Vuc2VlbicsCiAgbmFtZTogJ0hvbWUnLAogIGNvbXBvbmVudDogSG9tZQp9LCB7CiAgcGF0aDogJy91bnNlZW4vOmdhbWVJZCcsCiAgbmFtZTogJ0dhbWUnLAogIGNvbXBvbmVudDogR2FtZQp9XTsKdmFyIHJvdXRlciA9IGNyZWF0ZVJvdXRlcih7CiAgaGlzdG9yeTogY3JlYXRlV2ViSGlzdG9yeSgpLAogIGJhc2U6ICJ1bnNlZW4iLAogIHJvdXRlczogcm91dGVzCn0pOwpyb3V0ZXIuYmVmb3JlRWFjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0bywgZnJvbSwgbmV4dCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoc3RvcmUuc3RhdGUudXNlcm5hbWUgPT09ICIiICYmIHN0b3JlLnN0YXRlLmxvZ2dlZCA9PT0gLTEpIHsKICAgICAgICAgICAgICAvL3NlIG5vbiDDqCBhbmNvcmEgc3RhdG8gdHJvdmF0byBpbCBsb2dnZWQKICAgICAgICAgICAgICBheGlvcy5nZXQoZ2V0TG9naW5JbmZvVXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgLy9zZSDDqCBsb2dnYXRvIGluIHF1YWxjaGUgbW9kbwogICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0TG9nZ2VkIiwgcmVzcG9uc2UuZGF0YS5nb29nbGVfc2lnbmVkX2luKTsKICAgICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldFVzZXJuYW1lIiwgZGVjb2RlVVJJQ29tcG9uZW50KHJlc3BvbnNlLmRhdGEudXNlcm5hbWUpKTsKICAgICAgICAgICAgICAgICAgbmV4dCgpOyAvL3NlIMOoIGxvZ2dhdG8gaW4gcXVhbGNoZSBtb2RvIHB1w7IgYW5kYXJlIGRvdmUgdnVvbGUKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIC8vc2Ugbm9uIMOoIGxvZ2dhdG8KICAgICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldFVzZXJuYW1lIiwgbnVsbCk7CiAgICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCJzZXRMb2dnZWQiLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICBpZiAodG8ubmFtZSA9PT0gIkdhbWUiKSB7CiAgICAgICAgICAgICAgICAgICAgLy9zZSBzdGEgYW5kYW5kbyBpbiB1bmEgcGFydGl0YQogICAgICAgICAgICAgICAgICAgIGF4aW9zLmdldChjcmVhdGVMb2NhbEFjY291bnRVcmwpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgbmV4dCgpOyAvL3NlIG5vbiBzdGEgYW5kYW5kbyBpbiB1bmEgcGFydGl0YSBub24gYyfDqCBiaXNvZ25vIGRlbGwnYWNjb3VudAoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIG5leHQoKTsKCiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js"],"names":["createRouter","createWebHistory","Home","Game","axios","createLocalAccountUrl","getLoginInfoUrl","store","routes","path","name","component","router","history","base","beforeEach","to","from","next","state","username","logged","get","then","response","data","dispatch","google_signed_in","decodeURIComponent"],"mappings":";;;AAAA,SAASA,YAAT,EAAuBC,gBAAvB,QAA+C,YAA/C;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,qBAAR,EAA+BC,eAA/B,QAAqD,wBAArD;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAGA,IAAMC,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,SADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,SAAS,EAAET;AAHb,CADa,EAMb;AACEO,EAAAA,IAAI,EAAE,iBADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,SAAS,EAAER;AAHb,CANa,CAAf;AAaA,IAAMS,MAAM,GAAGZ,YAAY,CAAC;AAC1Ba,EAAAA,OAAO,EAAEZ,gBAAgB,EADC;AAE1Ba,EAAAA,IAAI,EAAE,QAFoB;AAG1BN,EAAAA,MAAM,EAANA;AAH0B,CAAD,CAA3B;AAMAI,MAAM,CAACG,UAAP;AAAA,qEAAkB,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAChB,gBAAGX,KAAK,CAACY,KAAN,CAAYC,QAAZ,KAAyB,EAAzB,IAA+Bb,KAAK,CAACY,KAAN,CAAYE,MAAZ,KAAuB,CAAC,CAA1D,EAA4D;AAAE;AAC5DjB,cAAAA,KAAK,CACAkB,GADL,CACShB,eADT,EAEKiB,IAFL,CAEU,UAACC,QAAD,EAAY;AAChB,oBAAGA,QAAQ,CAACC,IAAZ,EAAiB;AAAE;AACjBlB,kBAAAA,KAAK,CAACmB,QAAN,CAAe,WAAf,EAA4BF,QAAQ,CAACC,IAAT,CAAcE,gBAA1C;AACApB,kBAAAA,KAAK,CAACmB,QAAN,CAAe,aAAf,EAA8BE,kBAAkB,CAACJ,QAAQ,CAACC,IAAT,CAAcL,QAAf,CAAhD;AAEAF,kBAAAA,IAAI,GAJW,CAIP;AAET,iBAND,MAMO;AAAE;AACPX,kBAAAA,KAAK,CAACmB,QAAN,CAAe,aAAf,EAA8B,IAA9B;AACAnB,kBAAAA,KAAK,CAACmB,QAAN,CAAe,WAAf,EAA4B,KAA5B;;AAEA,sBAAGV,EAAE,CAACN,IAAH,KAAU,MAAb,EAAoB;AAAE;AACpBN,oBAAAA,KAAK,CACAkB,GADL,CACSjB,qBADT,EAEKkB,IAFL,CAEU,YAAI;AACNL,sBAAAA,IAAI;AACP,qBAJL;AAKD,mBAND,MAMOA,IAAI,GAVN,CAUU;;AAEhB;AACF,eAtBL;AAuBD,aAxBD,MAwBOA,IAAI;;AAzBK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA;AA4BA,eAAeN,MAAf","sourcesContent":["import { createRouter, createWebHistory } from 'vue-router';\nimport Home from \"../views/Home\";\nimport Game from \"../views/Game\";\nimport axios from \"axios\";\nimport {createLocalAccountUrl, getLoginInfoUrl} from \"../constants/constants\";\nimport store from \"../store\";\n\n\nconst routes = [\n  {\n    path: '/unseen',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/unseen/:gameId',\n    name: 'Game',\n    component: Game\n  }\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  base: \"unseen\",\n  routes\n});\n\nrouter.beforeEach(async (to, from, next)=>{\n  if(store.state.username === \"\" && store.state.logged === -1){ //se non è ancora stato trovato il logged\n    axios\n        .get(getLoginInfoUrl)\n        .then((response)=>{\n          if(response.data){ //se è loggato in qualche modo\n            store.dispatch(\"setLogged\", response.data.google_signed_in);\n            store.dispatch(\"setUsername\", decodeURIComponent(response.data.username));\n\n            next(); //se è loggato in qualche modo può andare dove vuole\n\n          } else { //se non è loggato\n            store.dispatch(\"setUsername\", null);\n            store.dispatch(\"setLogged\", false);\n\n            if(to.name===\"Game\"){ //se sta andando in una partita\n              axios\n                  .get(createLocalAccountUrl)\n                  .then(()=>{\n                      next();\n                  });\n            } else next(); //se non sta andando in una partita non c'è bisogno dell'account\n\n          }\n        });\n  } else next();\n})\n\nexport default router\n"]}]}