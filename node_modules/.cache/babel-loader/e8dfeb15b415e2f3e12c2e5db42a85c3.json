{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js","mtime":1615624640726},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js","mtime":1612540687689},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/eslint-loader/index.js","mtime":1612540687937}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGNyZWF0ZVJvdXRlciwgY3JlYXRlV2ViSGlzdG9yeSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwoKdmFyIEVycm9yID0gZnVuY3Rpb24gRXJyb3IoKSB7CiAgcmV0dXJuIGltcG9ydCgiLi4vdmlld3MvRXJyb3IiCiAgLyogd2VicGFja0NodW5rTmFtZTogImVycm9yIiAqLwogICk7Cn07Cgp2YXIgSG9tZSA9IGZ1bmN0aW9uIEhvbWUoKSB7CiAgcmV0dXJuIGltcG9ydCgiLi4vdmlld3MvSG9tZSIKICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAiaG9tZSIgKi8KICApOwp9OwoKdmFyIEdhbWUgPSBmdW5jdGlvbiBHYW1lKCkgewogIHJldHVybiBpbXBvcnQoIi4uL3ZpZXdzL0dhbWUiCiAgLyogd2VicGFja0NodW5rTmFtZTogImdhbWUiICovCiAgKTsKfTsKCnZhciByb3V0ZXMgPSBbewogIHBhdGg6ICcvdW5zZWVuJywKICBuYW1lOiAnSG9tZScsCiAgY29tcG9uZW50OiBIb21lCn0sIHsKICBwYXRoOiAnL3Vuc2Vlbi86Z2FtZUlkJywKICBuYW1lOiAnR2FtZScsCiAgY29tcG9uZW50OiBHYW1lCn0sIHsKICBwYXRoOiAnL2Vycm9yLycsCiAgbmFtZTogJ0Vycm9yJywKICBjb21wb25lbnQ6IEVycm9yCn1dOwp2YXIgcm91dGVyID0gY3JlYXRlUm91dGVyKHsKICBoaXN0b3J5OiBjcmVhdGVXZWJIaXN0b3J5KCksCiAgYmFzZTogInVuc2VlbiIsCiAgcm91dGVzOiByb3V0ZXMKfSk7Ci8qcm91dGVyLmJlZm9yZUVhY2goYXN5bmMgKHRvLCBmcm9tLCBuZXh0KT0+ewogICAgLy9uZXh0KCk7CiAgICBuZXh0KHtuYW1lOiAiRXJyb3IifSk7CiAgICBpZihzdG9yZS5zdGF0ZS51c2VybmFtZSA9PT0gIiIgJiYgc3RvcmUuc3RhdGUubG9nZ2VkID09PSAtMSl7IC8vc2Ugbm9uIMOoIGFuY29yYSBzdGF0byB0cm92YXRvIGlsIGxvZ2dlZAogICAgYXhpb3MKICAgICAgICAuZ2V0KGdldExvZ2luSW5mb1VybCkKICAgICAgICAudGhlbigocmVzcG9uc2UpPT57CiAgICAgICAgICBpZihyZXNwb25zZS5kYXRhKXsgLy9zZSDDqCBsb2dnYXRvIGluIHF1YWxjaGUgbW9kbwogICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0TG9nZ2VkIiwgcmVzcG9uc2UuZGF0YS5nb29nbGVfc2lnbmVkX2luKTsKICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldFVzZXJuYW1lIiwgZGVjb2RlVVJJQ29tcG9uZW50KHJlc3BvbnNlLmRhdGEudXNlcm5hbWUpKTsKCiAgICAgICAgICAgIG5leHQoKTsgLy9zZSDDqCBsb2dnYXRvIGluIHF1YWxjaGUgbW9kbyBwdcOyIGFuZGFyZSBkb3ZlIHZ1b2xlCgogICAgICAgICAgfSBlbHNlIHsgLy9zZSBub24gw6ggbG9nZ2F0bwogICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0VXNlcm5hbWUiLCBudWxsKTsKICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldExvZ2dlZCIsIGZhbHNlKTsKCiAgICAgICAgICAgIGlmKHRvLm5hbWU9PT0iR2FtZSIpeyAvL3NlIHN0YSBhbmRhbmRvIGluIHVuYSBwYXJ0aXRhCiAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgICAgLmdldChjcmVhdGVMb2NhbEFjY291bnRVcmwpCiAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSk9PnsKICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCJzZXRVc2VybmFtZSIsIHJlc3BvbnNlLmRhdGEudXNlcm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldExvZ2dlZCIsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgLmNhdGNoKCgpPT57CiAgICAgICAgICAgICAgICAgICAgICBuZXh0KHtuYW1lOiAiRXJyb3IifSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgbmV4dCgpOyAvL3NlIG5vbiBzdGEgYW5kYW5kbyBpbiB1bmEgcGFydGl0YSBub24gYyfDqCBiaXNvZ25vIGRlbGwnYWNjb3VudAoKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKT0+ewogICAgICAgICAgICBuZXh0KHtuYW1lOiAiRXJyb3IifSk7CiAgICAgICAgfSk7CiAgfSBlbHNlIHsKICAgICAgaWYoc3RvcmUuc3RhdGUudXNlcm5hbWUgPT09IG51bGwgJiYgdG8ubmFtZSA9PT0gIkdhbWUiKXsgLy9zZSBub24gw6ggbG9nZ2F0byBlIHN0YSBhbmRhbmRvIGluIHBhcnRpdGEKICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgLmdldChjcmVhdGVMb2NhbEFjY291bnRVcmwpCiAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKT0+ewogICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0VXNlcm5hbWUiLCByZXNwb25zZS5kYXRhLnVzZXJuYW1lKTsKICAgICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldExvZ2dlZCIsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKCgpPT57CiAgICAgICAgICAgICAgICAgIG5leHQoe25hbWU6ICJFcnJvciJ9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIG5leHQoKTsgLy9zZSDDqCBsb2dnYXRvCiAgfQp9KSovCgpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js"],"names":["createRouter","createWebHistory","Error","Home","Game","routes","path","name","component","router","history","base"],"mappings":";AAAA,SAASA,YAAT,EAAuBC,gBAAvB,QAA+C,YAA/C;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ;AAAA,SAAM,OAAO;AAAiB;AAAxB,GAAN;AAAA,CAAd;;AACA,IAAMC,IAAI,GAAG,SAAPA,IAAO;AAAA,SAAM,OAAO;AAAgB;AAAvB,GAAN;AAAA,CAAb;;AACA,IAAMC,IAAI,GAAG,SAAPA,IAAO;AAAA,SAAM,OAAO;AAAgB;AAAvB,GAAN;AAAA,CAAb;;AAEA,IAAMC,MAAM,GAAG,CACX;AACIC,EAAAA,IAAI,EAAE,SADV;AAEIC,EAAAA,IAAI,EAAE,MAFV;AAGIC,EAAAA,SAAS,EAAEL;AAHf,CADW,EAMX;AACIG,EAAAA,IAAI,EAAE,iBADV;AAEIC,EAAAA,IAAI,EAAE,MAFV;AAGIC,EAAAA,SAAS,EAAEJ;AAHf,CANW,EAWX;AACIE,EAAAA,IAAI,EAAE,SADV;AAEIC,EAAAA,IAAI,EAAE,OAFV;AAGIC,EAAAA,SAAS,EAAEN;AAHf,CAXW,CAAf;AAkBA,IAAMO,MAAM,GAAGT,YAAY,CAAC;AAC1BU,EAAAA,OAAO,EAAET,gBAAgB,EADC;AAE1BU,EAAAA,IAAI,EAAE,QAFoB;AAG1BN,EAAAA,MAAM,EAANA;AAH0B,CAAD,CAA3B;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAeI,MAAf","sourcesContent":["import { createRouter, createWebHistory } from 'vue-router';\n\nconst Error = () => import(\"../views/Error\" /* webpackChunkName: \"error\" */);\nconst Home = () => import(\"../views/Home\" /* webpackChunkName: \"home\" */);\nconst Game = () => import(\"../views/Game\" /* webpackChunkName: \"game\" */);\n\nconst routes = [\n    {\n        path: '/unseen',\n        name: 'Home',\n        component: Home\n    },\n    {\n        path: '/unseen/:gameId',\n        name: 'Game',\n        component: Game\n    },\n    {\n        path: '/error/',\n        name: 'Error',\n        component: Error\n    }\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  base: \"unseen\",\n  routes\n});\n\n/*router.beforeEach(async (to, from, next)=>{\n    //next();\n    next({name: \"Error\"});\n    if(store.state.username === \"\" && store.state.logged === -1){ //se non è ancora stato trovato il logged\n    axios\n        .get(getLoginInfoUrl)\n        .then((response)=>{\n          if(response.data){ //se è loggato in qualche modo\n            store.dispatch(\"setLogged\", response.data.google_signed_in);\n            store.dispatch(\"setUsername\", decodeURIComponent(response.data.username));\n\n            next(); //se è loggato in qualche modo può andare dove vuole\n\n          } else { //se non è loggato\n            store.dispatch(\"setUsername\", null);\n            store.dispatch(\"setLogged\", false);\n\n            if(to.name===\"Game\"){ //se sta andando in una partita\n              axios\n                  .get(createLocalAccountUrl)\n                  .then((response)=>{\n                      store.dispatch(\"setUsername\", response.data.username);\n                      store.dispatch(\"setLogged\", false);\n                      next();\n                  })\n                  .catch(()=>{\n                      next({name: \"Error\"});\n                  });\n            } else next(); //se non sta andando in una partita non c'è bisogno dell'account\n\n          }\n        })\n        .catch(()=>{\n            next({name: \"Error\"});\n        });\n  } else {\n      if(store.state.username === null && to.name === \"Game\"){ //se non è loggato e sta andando in partita\n          axios\n              .get(createLocalAccountUrl)\n              .then((response)=>{\n                  store.dispatch(\"setUsername\", response.data.username);\n                  store.dispatch(\"setLogged\", false);\n                  next();\n              })\n              .catch(()=>{\n                  next({name: \"Error\"});\n              });\n      } else next(); //se è loggato\n  }\n})*/\n\nexport default router\n"]}]}