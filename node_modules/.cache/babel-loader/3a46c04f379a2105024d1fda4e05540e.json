{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js","mtime":1614633143169},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js","mtime":1612540687689},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/eslint-loader/index.js","mtime":1612540687937}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay91bnNlZW4ucGFwZXJvLnRrL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgY3JlYXRlUm91dGVyLCBjcmVhdGVXZWJIaXN0b3J5IH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGNyZWF0ZUxvY2FsQWNjb3VudFVybCwgZ2V0TG9naW5JbmZvVXJsIH0gZnJvbSAiLi4vY29uc3RhbnRzL2NvbnN0YW50cyI7CmltcG9ydCBzdG9yZSBmcm9tICIuLi9zdG9yZSI7Cgp2YXIgSG9tZSA9IGZ1bmN0aW9uIEhvbWUoKSB7CiAgcmV0dXJuIGltcG9ydCgiLi4vdmlld3MvSG9tZSIKICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAiaG9tZSIgKi8KICApOwp9OwoKdmFyIEdhbWUgPSBmdW5jdGlvbiBHYW1lKCkgewogIHJldHVybiBpbXBvcnQoIi4uL3ZpZXdzL0dhbWUiCiAgLyogd2VicGFja0NodW5rTmFtZTogImdhbWUiICovCiAgKTsKfTsKCnZhciByb3V0ZXMgPSBbewogIHBhdGg6ICcvdW5zZWVuJywKICBuYW1lOiAnSG9tZScsCiAgY29tcG9uZW50OiBIb21lCn0sIHsKICBwYXRoOiAnL3Vuc2Vlbi86Z2FtZUlkJywKICBuYW1lOiAnR2FtZScsCiAgY29tcG9uZW50OiBHYW1lCn1dOwp2YXIgcm91dGVyID0gY3JlYXRlUm91dGVyKHsKICBoaXN0b3J5OiBjcmVhdGVXZWJIaXN0b3J5KCksCiAgYmFzZTogInVuc2VlbiIsCiAgcm91dGVzOiByb3V0ZXMKfSk7CnJvdXRlci5iZWZvcmVFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIG5leHQoKTsKCiAgICAgICAgICAgIGlmIChzdG9yZS5zdGF0ZS51c2VybmFtZSA9PT0gIiIgJiYgc3RvcmUuc3RhdGUubG9nZ2VkID09PSAtMSkgewogICAgICAgICAgICAgIC8vc2Ugbm9uIMOoIGFuY29yYSBzdGF0byB0cm92YXRvIGlsIGxvZ2dlZAogICAgICAgICAgICAgIGF4aW9zLmdldChnZXRMb2dpbkluZm9VcmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgICAvL3NlIMOoIGxvZ2dhdG8gaW4gcXVhbGNoZSBtb2RvCiAgICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCJzZXRMb2dnZWQiLCByZXNwb25zZS5kYXRhLmdvb2dsZV9zaWduZWRfaW4pOwogICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0VXNlcm5hbWUiLCBkZWNvZGVVUklDb21wb25lbnQocmVzcG9uc2UuZGF0YS51c2VybmFtZSkpOwogICAgICAgICAgICAgICAgICBuZXh0KCk7IC8vc2Ugw6ggbG9nZ2F0byBpbiBxdWFsY2hlIG1vZG8gcHXDsiBhbmRhcmUgZG92ZSB2dW9sZQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy9zZSBub24gw6ggbG9nZ2F0bwogICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0VXNlcm5hbWUiLCBudWxsKTsKICAgICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldExvZ2dlZCIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgICAgIGlmICh0by5uYW1lID09PSAiR2FtZSIpIHsKICAgICAgICAgICAgICAgICAgICAvL3NlIHN0YSBhbmRhbmRvIGluIHVuYSBwYXJ0aXRhCiAgICAgICAgICAgICAgICAgICAgYXhpb3MuZ2V0KGNyZWF0ZUxvY2FsQWNjb3VudFVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCJzZXRVc2VybmFtZSIsIHJlc3BvbnNlLmRhdGEudXNlcm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldExvZ2dlZCIsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIG5leHQoKTsgLy9zZSBub24gc3RhIGFuZGFuZG8gaW4gdW5hIHBhcnRpdGEgbm9uIGMnw6ggYmlzb2dubyBkZWxsJ2FjY291bnQKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHN0b3JlLnN0YXRlLnVzZXJuYW1lID09PSBudWxsICYmIHRvLm5hbWUgPT09ICJHYW1lIikgewogICAgICAgICAgICAgICAgLy9zZSBub24gw6ggbG9nZ2F0byBlIHN0YSBhbmRhbmRvIGluIHBhcnRpdGEKICAgICAgICAgICAgICAgIGF4aW9zLmdldChjcmVhdGVMb2NhbEFjY291bnRVcmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCJzZXRVc2VybmFtZSIsIHJlc3BvbnNlLmRhdGEudXNlcm5hbWUpOwogICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0TG9nZ2VkIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgbmV4dCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/router/index.js"],"names":["createRouter","createWebHistory","axios","createLocalAccountUrl","getLoginInfoUrl","store","Home","Game","routes","path","name","component","router","history","base","beforeEach","to","from","next","state","username","logged","get","then","response","data","dispatch","google_signed_in","decodeURIComponent"],"mappings":"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","sourcesContent":["import { createRouter, createWebHistory } from 'vue-router';\nimport axios from \"axios\";\nimport {createLocalAccountUrl, getLoginInfoUrl} from \"../constants/constants\";\nimport store from \"../store\";\n\nconst Home = () => import(\"../views/Home\" /* webpackChunkName: \"home\" */);\nconst Game = () => import(\"../views/Game\" /* webpackChunkName: \"game\" */);\n\nconst routes = [\n  {\n    path: '/unseen',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/unseen/:gameId',\n    name: 'Game',\n    component: Game\n  }\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  base: \"unseen\",\n  routes\n});\n\nrouter.beforeEach(async (to, from, next)=>{\n    next();\n  if(store.state.username === \"\" && store.state.logged === -1){ //se non è ancora stato trovato il logged\n    axios\n        .get(getLoginInfoUrl)\n        .then((response)=>{\n          if(response.data){ //se è loggato in qualche modo\n            store.dispatch(\"setLogged\", response.data.google_signed_in);\n            store.dispatch(\"setUsername\", decodeURIComponent(response.data.username));\n\n            next(); //se è loggato in qualche modo può andare dove vuole\n\n          } else { //se non è loggato\n            store.dispatch(\"setUsername\", null);\n            store.dispatch(\"setLogged\", false);\n\n            if(to.name===\"Game\"){ //se sta andando in una partita\n              axios\n                  .get(createLocalAccountUrl)\n                  .then((response)=>{\n                      store.dispatch(\"setUsername\", response.data.username);\n                      store.dispatch(\"setLogged\", false);\n                      next();\n                  });\n            } else next(); //se non sta andando in una partita non c'è bisogno dell'account\n\n          }\n        });\n  } else {\n      if(store.state.username === null && to.name === \"Game\"){ //se non è loggato e sta andando in partita\n          axios\n              .get(createLocalAccountUrl)\n              .then((response)=>{\n                  store.dispatch(\"setUsername\", response.data.username);\n                  store.dispatch(\"setLogged\", false);\n                  next();\n              });\n      } else next();\n  }\n})\n\nexport default router\n"]}]}