{"remainingRequest":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\src\\router\\index.js","dependencies":[{"path":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\src\\router\\index.js","mtime":1613726759854},{"path":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613722167369},{"path":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1613722194264},{"path":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\babel-loader\\lib\\index.js","mtime":1613722166857},{"path":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\eslint-loader\\index.js","mtime":1613722172921}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL21hdHRlL0Rlc2t0b3AvcGFwZXJvL3Vuc2Vlbi5wYXBlcm8udGsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBjcmVhdGVSb3V0ZXIsIGNyZWF0ZVdlYkhpc3RvcnkgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IEhvbWUgZnJvbSAiLi4vdmlld3MvSG9tZSI7CmltcG9ydCBHYW1lIGZyb20gIi4uL3ZpZXdzL0dhbWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgeyBjcmVhdGVMb2NhbEFjY291bnRVcmwsIGdldExvZ2luSW5mb1VybCB9IGZyb20gIi4uL2NvbnN0YW50cy9jb25zdGFudHMiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi4vc3RvcmUiOwp2YXIgcm91dGVzID0gW3sKICBwYXRoOiAnL3Vuc2VlbicsCiAgbmFtZTogJ0hvbWUnLAogIGNvbXBvbmVudDogSG9tZQp9LCB7CiAgcGF0aDogJy91bnNlZW4vOmdhbWVJZCcsCiAgbmFtZTogJ0dhbWUnLAogIGNvbXBvbmVudDogR2FtZQp9XTsKdmFyIHJvdXRlciA9IGNyZWF0ZVJvdXRlcih7CiAgaGlzdG9yeTogY3JlYXRlV2ViSGlzdG9yeSgpLAogIGJhc2U6ICJ1bnNlZW4iLAogIHJvdXRlczogcm91dGVzCn0pOwpyb3V0ZXIuYmVmb3JlRWFjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0bywgZnJvbSwgbmV4dCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBheGlvcy5nZXQoZ2V0TG9naW5JbmZvVXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICAvL3NlIMOoIGxvZ2dhdG8gaW4gcXVhbGNoZSBtb2RvCiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0TG9nZ2VkIiwgcmVzcG9uc2UuZGF0YS5nb29nbGVfc2lnbmVkX2luKTsKICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCJzZXRVc2VybmFtZSIsIGRlY29kZVVSSUNvbXBvbmVudChyZXNwb25zZS5kYXRhLnVzZXJuYW1lKSk7CiAgICAgICAgICAgICAgICBuZXh0KCk7IC8vc2Ugw6ggbG9nZ2F0byBpbiBxdWFsY2hlIG1vZG8gcHXDsiBhbmRhcmUgZG92ZSB2dW9sZQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvL3NlIG5vbiDDqCBsb2dnYXRvCiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0TG9nZ2VkIiwgZmFsc2UpOwoKICAgICAgICAgICAgICAgIGlmICh0by5uYW1lID09PSAiR2FtZSIpIHsKICAgICAgICAgICAgICAgICAgLy9zZSBzdGEgYW5kYW5kbyBpbiB1bmEgcGFydGl0YQogICAgICAgICAgICAgICAgICBheGlvcy5nZXQoY3JlYXRlTG9jYWxBY2NvdW50VXJsKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIG5leHQoKTsgLy9zZSBub24gc3RhIGFuZGFuZG8gaW4gdW5hIHBhcnRpdGEgbm9uIGMnw6ggYmlzb2dubyBkZWxsJ2FjY291bnQKCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsgLy9uZXh0KCk7CgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["C:/Users/matte/Desktop/papero/unseen.papero.tk/src/router/index.js"],"names":["createRouter","createWebHistory","Home","Game","axios","createLocalAccountUrl","getLoginInfoUrl","store","routes","path","name","component","router","history","base","beforeEach","to","from","next","get","then","response","data","dispatch","google_signed_in","decodeURIComponent","username"],"mappings":";;;AAAA,SAASA,YAAT,EAAuBC,gBAAvB,QAA+C,YAA/C;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,qBAAR,EAA+BC,eAA/B,QAAqD,wBAArD;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAGA,IAAMC,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,SADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,SAAS,EAAET;AAHb,CADa,EAMb;AACEO,EAAAA,IAAI,EAAE,iBADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,SAAS,EAAER;AAHb,CANa,CAAf;AAaA,IAAMS,MAAM,GAAGZ,YAAY,CAAC;AAC1Ba,EAAAA,OAAO,EAAEZ,gBAAgB,EADC;AAE1Ba,EAAAA,IAAI,EAAE,QAFoB;AAG1BN,EAAAA,MAAM,EAANA;AAH0B,CAAD,CAA3B;AAMAI,MAAM,CAACG,UAAP;AAAA,qEAAkB,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAChBd,YAAAA,KAAK,CACAe,GADL,CACSb,eADT,EAEKc,IAFL,CAEU,UAACC,QAAD,EAAY;AAChB,kBAAGA,QAAQ,CAACC,IAAZ,EAAiB;AAAE;AACjBf,gBAAAA,KAAK,CAACgB,QAAN,CAAe,WAAf,EAA4BF,QAAQ,CAACC,IAAT,CAAcE,gBAA1C;AACAjB,gBAAAA,KAAK,CAACgB,QAAN,CAAe,aAAf,EAA8BE,kBAAkB,CAACJ,QAAQ,CAACC,IAAT,CAAcI,QAAf,CAAhD;AAEAR,gBAAAA,IAAI,GAJW,CAIP;AAET,eAND,MAMO;AAAE;AACPX,gBAAAA,KAAK,CAACgB,QAAN,CAAe,WAAf,EAA4B,KAA5B;;AAEA,oBAAGP,EAAE,CAACN,IAAH,KAAU,MAAb,EAAoB;AAAE;AACpBN,kBAAAA,KAAK,CACAe,GADL,CACSd,qBADT,EAEKe,IAFL,CAEU,YAAI;AAACF,oBAAAA,IAAI;AAAG,mBAFtB;AAGD,iBAJD,MAIOA,IAAI,GAPN,CAOU;;AAEhB;AACF,aAnBL,EADgB,CAqBhB;;AArBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA;AAwBA,eAAeN,MAAf","sourcesContent":["import { createRouter, createWebHistory } from 'vue-router';\r\nimport Home from \"../views/Home\";\r\nimport Game from \"../views/Game\";\r\nimport axios from \"axios\";\r\nimport {createLocalAccountUrl, getLoginInfoUrl} from \"../constants/constants\";\r\nimport store from \"../store\";\r\n\r\n\r\nconst routes = [\r\n  {\r\n    path: '/unseen',\r\n    name: 'Home',\r\n    component: Home\r\n  },\r\n  {\r\n    path: '/unseen/:gameId',\r\n    name: 'Game',\r\n    component: Game\r\n  }\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(),\r\n  base: \"unseen\",\r\n  routes\r\n});\r\n\r\nrouter.beforeEach(async (to, from, next)=>{\r\n  axios\r\n      .get(getLoginInfoUrl)\r\n      .then((response)=>{\r\n        if(response.data){ //se è loggato in qualche modo\r\n          store.dispatch(\"setLogged\", response.data.google_signed_in);\r\n          store.dispatch(\"setUsername\", decodeURIComponent(response.data.username));\r\n\r\n          next(); //se è loggato in qualche modo può andare dove vuole\r\n\r\n        } else { //se non è loggato\r\n          store.dispatch(\"setLogged\", false);\r\n\r\n          if(to.name===\"Game\"){ //se sta andando in una partita\r\n            axios\r\n                .get(createLocalAccountUrl)\r\n                .then(()=>{next()});\r\n          } else next(); //se non sta andando in una partita non c'è bisogno dell'account\r\n\r\n        }\r\n      });\r\n  //next();\r\n})\r\n\r\nexport default router\r\n"]}]}