{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js??ref--0-0!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/components/gamePhaseComponents/MapManager.vue?vue&type=script&lang=js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/components/gamePhaseComponents/MapManager.vue","mtime":1614341010700},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js","mtime":1612540687689},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/vue-loader-v16/dist/index.js","mtime":1612540688641}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWF0aC5zaWduLmpzIjsKaW1wb3J0ICogYXMgUElYSSBmcm9tICJwaXhpLmpzLWxlZ2FjeSI7CmltcG9ydCB7IGJhY2tncm91bmRUaWxlc2V0RGltZW5zaW9uLCBnZXRDb250YWluZXJGcm9tU3RhdGlvbnMsIGtleVByZXNzZWQsIG1hcERpbWVuc2lvbiwgbWF4Wm9vbSwgbWluWm9vbSwgcGF0aHNUaWxlc2V0RGltZW5zaW9uLCBzdGF0aW9uc1RpbGVzZXREaW1lbnNpb24sIHRpbGVTaXplLCB6b29tU2Vuc2liaWxpdHkgfSBmcm9tICIuLi8uLi9jb25zdGFudHMvbWFwQ29uc3RhbnRzIjsKaW1wb3J0IHN0YXRpb25zIGZyb20gIi4uLy4uL2NvbnN0YW50cy9zdGF0aW9ucyI7CmltcG9ydCB7IG9uTW91bnRlZCwgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IHBhdGhzVGlsZXNldEltYWdlIGZyb20gIi4uLy4uL2Fzc2V0cy9wYXRoc1RpbGVzZXQucG5nIjsKaW1wb3J0IHN0YXRpb25zVGlsZXNldEltYWdlIGZyb20gIi4uLy4uL2Fzc2V0cy9zdGF0aW9uc1RpbGVzZXQucG5nIjsKaW1wb3J0IGJhY2tncm91bmRUaWxlc2V0SW1hZ2UgZnJvbSAiLi4vLi4vYXNzZXRzL2JhY2tncm91bmRUaWxlc2V0LnBuZyI7CmltcG9ydCBwYXRocyBmcm9tICIuLi8uLi9jb25zdGFudHMvcGF0aHMiOwppbXBvcnQgYmFja2dyb3VuZHMgZnJvbSAiLi4vLi4vY29uc3RhbnRzL2JhY2tncm91bmQiOwppbXBvcnQgcmVuZGVyZXIgZnJvbSAiLi4vLi4vbW9kdWxlcy9yZW5kZXJlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWFwTWFuYWdlciIsCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIGFwcCA9IG5ldyBQSVhJLkFwcGxpY2F0aW9uKHsKICAgICAgd2lkdGg6IHRpbGVTaXplICogbWFwRGltZW5zaW9uLndpZHRoLAogICAgICBoZWlnaHQ6IHRpbGVTaXplICogbWFwRGltZW5zaW9uLmhlaWdodCwKICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsCiAgICAgIGFudGlhbGlhczogZmFsc2UKICAgIH0pOwogICAgUElYSS5zZXR0aW5ncy5ST1VORF9QSVhFTFMgPSB0cnVlOwogICAgYXBwLmxvYWRlci5hZGQoInBhdGhzVGlsZXNldCIsIHBhdGhzVGlsZXNldEltYWdlKS5hZGQoInN0YXRpb25zVGlsZXNldCIsIHN0YXRpb25zVGlsZXNldEltYWdlKS5hZGQoImJhY2tncm91bmRUaWxlc2V0IiwgYmFja2dyb3VuZFRpbGVzZXRJbWFnZSkubG9hZChmdW5jdGlvbiAobG9hZGVyLCByZXNvdXJjZXMpIHsKICAgICAgLy9jcm9wIHRpbGVzZXRzIHRvIGdldCB0aWxlcyB0ZXh0dXJlcwogICAgICB2YXIgcGF0aHNUZXh0dXJlcyA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoc1RpbGVzZXREaW1lbnNpb24ud2lkdGggKiBwYXRoc1RpbGVzZXREaW1lbnNpb24uaGVpZ2h0OyBpKyspIHsKICAgICAgICB2YXIgeCA9IGkgJSBwYXRoc1RpbGVzZXREaW1lbnNpb24ud2lkdGg7CiAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKGkgLyBwYXRoc1RpbGVzZXREaW1lbnNpb24ud2lkdGgpOwogICAgICAgIHBhdGhzVGV4dHVyZXNbaV0gPSBuZXcgUElYSS5UZXh0dXJlKHJlc291cmNlcy5wYXRoc1RpbGVzZXQudGV4dHVyZSwgbmV3IFBJWEkuUmVjdGFuZ2xlKHggKiB0aWxlU2l6ZSwgeSAqIHRpbGVTaXplLCB0aWxlU2l6ZSwgdGlsZVNpemUpKTsKICAgICAgfQoKICAgICAgdmFyIHN0YXRpb25zVGV4dHVyZXMgPSBbXTsKCiAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBzdGF0aW9uc1RpbGVzZXREaW1lbnNpb24ud2lkdGggKiBzdGF0aW9uc1RpbGVzZXREaW1lbnNpb24uaGVpZ2h0OyBfaSsrKSB7CiAgICAgICAgdmFyIF94ID0gX2kgJSBzdGF0aW9uc1RpbGVzZXREaW1lbnNpb24ud2lkdGg7CgogICAgICAgIHZhciBfeSA9IE1hdGguZmxvb3IoX2kgLyBzdGF0aW9uc1RpbGVzZXREaW1lbnNpb24ud2lkdGgpOwoKICAgICAgICBzdGF0aW9uc1RleHR1cmVzW19pXSA9IG5ldyBQSVhJLlRleHR1cmUocmVzb3VyY2VzLnN0YXRpb25zVGlsZXNldC50ZXh0dXJlLCBuZXcgUElYSS5SZWN0YW5nbGUoX3ggKiB0aWxlU2l6ZSwgX3kgKiB0aWxlU2l6ZSwgdGlsZVNpemUsIHRpbGVTaXplKSk7CiAgICAgIH0KCiAgICAgIHZhciBiYWNrZ3JvdW5kVGV4dHVyZXMgPSBbXTsKCiAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IGJhY2tncm91bmRUaWxlc2V0RGltZW5zaW9uLndpZHRoICogYmFja2dyb3VuZFRpbGVzZXREaW1lbnNpb24uaGVpZ2h0OyBfaTIrKykgewogICAgICAgIHZhciBfeDIgPSBfaTIgJSBiYWNrZ3JvdW5kVGlsZXNldERpbWVuc2lvbi53aWR0aDsKCiAgICAgICAgdmFyIF95MiA9IE1hdGguZmxvb3IoX2kyIC8gYmFja2dyb3VuZFRpbGVzZXREaW1lbnNpb24ud2lkdGgpOwoKICAgICAgICBiYWNrZ3JvdW5kVGV4dHVyZXNbX2kyXSA9IG5ldyBQSVhJLlRleHR1cmUocmVzb3VyY2VzLmJhY2tncm91bmRUaWxlc2V0LnRleHR1cmUsIG5ldyBQSVhJLlJlY3RhbmdsZShfeDIgKiB0aWxlU2l6ZSwgX3kyICogdGlsZVNpemUsIHRpbGVTaXplLCB0aWxlU2l6ZSkpOwogICAgICB9CgogICAgICB2YXIgbGlua3MgPSBuZXcgUElYSS5Db250YWluZXIoKTsKICAgICAgdmFyIGJhY2tncm91bmQgPSBuZXcgUElYSS5Db250YWluZXIoKTsKCiAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1hcERpbWVuc2lvbi5oZWlnaHQ7IHJvdysrKSB7CiAgICAgICAgZm9yICh2YXIgY29sID0gMDsgY29sIDwgbWFwRGltZW5zaW9uLndpZHRoOyBjb2wrKykgewogICAgICAgICAgdmFyIHBhdGhUZXh0dXJlID0gcGF0aHNUZXh0dXJlc1twYXRoc1tyb3ddW2NvbF1dOwogICAgICAgICAgdmFyIHBhdGhTcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUocGF0aFRleHR1cmUpOwogICAgICAgICAgcGF0aFNwcml0ZS54ID0gdGlsZVNpemUgKiBjb2w7CiAgICAgICAgICBwYXRoU3ByaXRlLnkgPSB0aWxlU2l6ZSAqIHJvdzsKICAgICAgICAgIGxpbmtzLmFkZENoaWxkKHBhdGhTcHJpdGUpOwogICAgICAgICAgdmFyIGJhY2tncm91bmRUZXh0dXJlID0gYmFja2dyb3VuZFRleHR1cmVzW2JhY2tncm91bmRzW3Jvd11bY29sXV07CiAgICAgICAgICB2YXIgYmFja2dyb3VuZFNwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZShiYWNrZ3JvdW5kVGV4dHVyZSk7CiAgICAgICAgICBiYWNrZ3JvdW5kU3ByaXRlLnggPSB0aWxlU2l6ZSAqIGNvbDsKICAgICAgICAgIGJhY2tncm91bmRTcHJpdGUueSA9IHRpbGVTaXplICogcm93OwogICAgICAgICAgYmFja2dyb3VuZC5hZGRDaGlsZChiYWNrZ3JvdW5kU3ByaXRlKTsKICAgICAgICB9CiAgICAgIH0gLy9hcHAuc3RhZ2UuYWRkQ2hpbGQoYmFja2dyb3VuZCk7CgoKICAgICAgYXBwLnN0YWdlLmFkZENoaWxkKGxpbmtzKTsKICAgICAgYXBwLnN0YWdlLmFkZENoaWxkKGdldENvbnRhaW5lckZyb21TdGF0aW9ucyhzdGF0aW9ucywgdGlsZVNpemUsIHN0YXRpb25zVGV4dHVyZXMpKTsKICAgIH0pOwogICAgYXBwLmxvYWRlci5vbkVycm9yLmFkZChmdW5jdGlvbiAoZSkgewogICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgfSk7CiAgICBvbk1vdW50ZWQoZnVuY3Rpb24gKCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWFwLW1hbmFnZXJfX21haW4tcGFuZWwiKS5hcHBlbmRDaGlsZChhcHAudmlldyk7CiAgICAgIHZhciBkcmFnZ2luZyA9IHJlZihmYWxzZSk7CiAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWFwLW1hbmFnZXJfX21haW4tcGFuZWwiKTsKICAgICAgdmFyIGluc3RhbmNlID0gcmVuZGVyZXIoewogICAgICAgIG1pblNjYWxlOiBtaW5ab29tLAogICAgICAgIG1heFNjYWxlOiBtYXhab29tLAogICAgICAgIGVsZW1lbnQ6IGNvbnRhaW5lci5jaGlsZHJlblswXSwKICAgICAgICBzY2FsZVNlbnNpdGl2aXR5OiB6b29tU2Vuc2liaWxpdHkKICAgICAgfSk7CiAgICAgIGluc3RhbmNlLnpvb20oewogICAgICAgIGRlbHRhU2NhbGU6IC0xMSwKICAgICAgICB4OiB3aW5kb3cuaW5uZXJXaWR0aCAvIDUwLAogICAgICAgIHk6IHdpbmRvdy5pbm5lckhlaWdodCAvIDIwCiAgICAgIH0pOwogICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigid2hlZWwiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBpZiAoZXZlbnQuY3RybEtleSkgcmV0dXJuOwogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgaW5zdGFuY2Uuem9vbSh7CiAgICAgICAgICBkZWx0YVNjYWxlOiBNYXRoLnNpZ24oZXZlbnQuZGVsdGFZKSwKICAgICAgICAgIHg6IGV2ZW50LnBhZ2VYLAogICAgICAgICAgeTogZXZlbnQucGFnZVkKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgZHJhZ2dpbmcudmFsdWUgPSB0cnVlOwogICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gIm1vdmUiOwogICAgICB9KTsKICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGlmICghZHJhZ2dpbmcudmFsdWUpIHJldHVybjsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGluc3RhbmNlLnBhbkJ5KHsKICAgICAgICAgIG9yaWdpblg6IGV2ZW50Lm1vdmVtZW50WCwKICAgICAgICAgIG9yaWdpblk6IGV2ZW50Lm1vdmVtZW50WQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgZHJhZ2dpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgfSk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIGtleVByZXNzZWQoZXZlbnQsIGluc3RhbmNlKTsKICAgICAgfSk7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/components/gamePhaseComponents/MapManager.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"map-manager__main-panel\"\r\n       id=\"map-manager__main-panel\"></div>\r\n</template>\r\n\r\n<script>\r\nimport *  as PIXI from \"pixi.js-legacy\";\r\nimport {\r\n  backgroundTilesetDimension,\r\n  getContainerFromStations,\r\n  keyPressed,\r\n  mapDimension, maxZoom, minZoom,\r\n  pathsTilesetDimension,\r\n  stationsTilesetDimension,\r\n  tileSize, zoomSensibility\r\n} from \"../../constants/mapConstants\";\r\nimport stations from \"../../constants/stations\";\r\nimport {onMounted, ref} from \"vue\";\r\nimport pathsTilesetImage from \"../../assets/pathsTileset.png\";\r\nimport stationsTilesetImage from \"../../assets/stationsTileset.png\";\r\nimport backgroundTilesetImage from \"../../assets/backgroundTileset.png\";\r\nimport paths from \"../../constants/paths\";\r\nimport backgrounds from \"../../constants/background\";\r\nimport renderer from \"../../modules/renderer\";\r\nexport default {\r\n  name: \"MapManager\",\r\n  setup() {\r\n    const app = new PIXI.Application({\r\n      width: tileSize * mapDimension.width,\r\n      height: tileSize * mapDimension.height,\r\n      transparent: true,\r\n      antialias: false\r\n    });\r\n\r\n    PIXI.settings.ROUND_PIXELS = true;\r\n\r\n    app.loader\r\n        .add(\"pathsTileset\", pathsTilesetImage)\r\n        .add(\"stationsTileset\", stationsTilesetImage)\r\n        .add(\"backgroundTileset\", backgroundTilesetImage)\r\n        .load((loader, resources) => {\r\n\r\n          //crop tilesets to get tiles textures\r\n\r\n          let pathsTextures = [];\r\n          for (let i = 0; i < pathsTilesetDimension.width * pathsTilesetDimension.height; i++) {\r\n            let x = i % pathsTilesetDimension.width;\r\n            let y = Math.floor(i / pathsTilesetDimension.width);\r\n            pathsTextures[i] = new PIXI.Texture(\r\n                resources.pathsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          let stationsTextures = [];\r\n          for (let i = 0; i < stationsTilesetDimension.width * stationsTilesetDimension.height; i++) {\r\n            let x = i % stationsTilesetDimension.width;\r\n            let y = Math.floor(i / stationsTilesetDimension.width);\r\n            stationsTextures[i] = new PIXI.Texture(\r\n                resources.stationsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          let backgroundTextures = [];\r\n          for (let i = 0; i < backgroundTilesetDimension.width * backgroundTilesetDimension.height; i++) {\r\n            let x = i % backgroundTilesetDimension.width;\r\n            let y = Math.floor(i / backgroundTilesetDimension.width);\r\n            backgroundTextures[i] = new PIXI.Texture(\r\n                resources.backgroundTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          let links = new PIXI.Container();\r\n          let background = new PIXI.Container();\r\n\r\n          for (let row = 0; row < mapDimension.height; row++){\r\n            for (let col = 0; col < mapDimension.width; col++){\r\n              let pathTexture = pathsTextures[paths[row][col]];\r\n              let pathSprite = new PIXI.Sprite(pathTexture);\r\n              pathSprite.x = tileSize * col;\r\n              pathSprite.y = tileSize * row;\r\n              links.addChild(pathSprite);\r\n\r\n              let backgroundTexture = backgroundTextures[backgrounds[row][col]];\r\n              let backgroundSprite = new PIXI.Sprite(backgroundTexture);\r\n              backgroundSprite.x = tileSize * col;\r\n              backgroundSprite.y = tileSize * row;\r\n              background.addChild(backgroundSprite);\r\n            }\r\n          }\r\n          //app.stage.addChild(background);\r\n          app.stage.addChild(links);\r\n          app.stage.addChild(getContainerFromStations(stations, tileSize, stationsTextures));\r\n        });\r\n\r\n\r\n    app.loader.onError.add((e)=>{\r\n      console.error(e);\r\n    });\r\n\r\n    onMounted(() => {\r\n      document.getElementById(\"map-manager__main-panel\").appendChild(app.view);\r\n      const dragging = ref(false);\r\n\r\n      const container = document.getElementById(\"map-manager__main-panel\");\r\n      const instance = renderer({\r\n        minScale: minZoom,\r\n        maxScale: maxZoom,\r\n        element: container.children[0],\r\n        scaleSensitivity: zoomSensibility\r\n      });\r\n\r\n      instance.zoom({\r\n        deltaScale: -11,\r\n        x: window.innerWidth/50,\r\n        y: window.innerHeight/20\r\n      })\r\n\r\n      container.addEventListener(\"wheel\", (event) => {\r\n        if (event.ctrlKey) return;\r\n        event.preventDefault();\r\n        instance.zoom({\r\n          deltaScale: Math.sign(event.deltaY),\r\n          x: event.pageX,\r\n          y: event.pageY\r\n        });\r\n      });\r\n\r\n      container.addEventListener(\"mousedown\", () => {\r\n        dragging.value = true;\r\n        document.body.style.cursor = \"move\";\r\n      });\r\n\r\n      container.addEventListener(\"mousemove\", (event) => {\r\n        if (!dragging.value) return;\r\n        event.preventDefault();\r\n        instance.panBy({\r\n          originX: event.movementX,\r\n          originY: event.movementY\r\n        });\r\n      });\r\n\r\n      container.addEventListener(\"mouseup\", () => {\r\n        dragging.value = false;\r\n      });\r\n\r\n      window.addEventListener(\"keydown\", (event) => keyPressed(event, instance));\r\n    });\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.map-manager__main-panel{\r\n  overflow: hidden;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 0 20px 20px 0;\r\n}\r\n</style>"],"sourceRoot":""}]}