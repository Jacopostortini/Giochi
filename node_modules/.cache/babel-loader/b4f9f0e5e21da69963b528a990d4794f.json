{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js??ref--0-0!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/components/gamePhaseComponents/MapManager.vue?vue&type=script&lang=js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/components/gamePhaseComponents/MapManager.vue","mtime":1614109361208},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/babel-loader/lib/index.js","mtime":1612540687689},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/cache-loader/dist/cjs.js","mtime":1612540687717},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/node_modules/vue-loader-v16/dist/index.js","mtime":1612540688641}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgUElYSSBmcm9tICJwaXhpLmpzLWxlZ2FjeSI7CmltcG9ydCB7IGJhY2tncm91bmRUaWxlc2V0RGltZW5zaW9uIC8vZ2V0Q29udGFpbmVyRnJvbVBhdGhPYmplY3QsCiwgZ2V0Q29udGFpbmVyRnJvbVN0YXRpb25zLCBrZXlQcmVzc2VkLCBtYXBEaW1lbnNpb24sIG1vdXNlV2hlZWxSZWR1Y3Rpb25GYWN0b3IsIHBhdGhzVGlsZXNldERpbWVuc2lvbiwgc3RhdGlvbnNUaWxlc2V0RGltZW5zaW9uLCB0aWxlU2l6ZSwgem9vbUZ1bmN0aW9uQmFzZSB9IGZyb20gIi4uLy4uL2NvbnN0YW50cy9tYXBDb25zdGFudHMiOwppbXBvcnQgc3RhdGlvbnMgZnJvbSAiLi4vLi4vY29uc3RhbnRzL3N0YXRpb25zIjsKaW1wb3J0IHsgb25Nb3VudGVkLCBjb21wdXRlZCwgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IHBhdGhzVGlsZXNldEltYWdlIGZyb20gIi4uLy4uL2Fzc2V0cy9wYXRoc1RpbGVzZXQucG5nIjsKaW1wb3J0IHN0YXRpb25zVGlsZXNldEltYWdlIGZyb20gIi4uLy4uL2Fzc2V0cy9zdGF0aW9uc1RpbGVzZXQucG5nIjsKaW1wb3J0IGJhY2tncm91bmRUaWxlc2V0SW1hZ2UgZnJvbSAiLi4vLi4vYXNzZXRzL2JhY2tncm91bmRUaWxlc2V0LnBuZyI7CmltcG9ydCBwYXRocyBmcm9tICIuLi8uLi9jb25zdGFudHMvcGF0aHMiOwppbXBvcnQgYmFja2dyb3VuZHMgZnJvbSAiLi4vLi4vY29uc3RhbnRzL2JhY2tncm91bmQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1hcE1hbmFnZXIiLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBkZWx0YVkgPSByZWYoMCk7CiAgICB2YXIgZHJhZ2dpbmcgPSByZWYoZmFsc2UpOwogICAgdmFyIHNjYWxlID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gTWF0aC5wb3coem9vbUZ1bmN0aW9uQmFzZSwgZGVsdGFZLnZhbHVlIC8gbW91c2VXaGVlbFJlZHVjdGlvbkZhY3Rvcik7CiAgICB9KTsKICAgIHZhciBhcHAgPSBuZXcgUElYSS5BcHBsaWNhdGlvbih7CiAgICAgIHdpZHRoOiB0aWxlU2l6ZSAqIG1hcERpbWVuc2lvbi53aWR0aCwKICAgICAgaGVpZ2h0OiB0aWxlU2l6ZSAqIG1hcERpbWVuc2lvbi5oZWlnaHQsCiAgICAgIHRyYW5zcGFyZW50OiB0cnVlLAogICAgICBhbnRpYWxpYXM6IGZhbHNlCiAgICB9KTsKICAgIFBJWEkuc2V0dGluZ3MuUk9VTkRfUElYRUxTID0gdHJ1ZTsKICAgIGFwcC5sb2FkZXIuYWRkKCJwYXRoc1RpbGVzZXQiLCBwYXRoc1RpbGVzZXRJbWFnZSkuYWRkKCJzdGF0aW9uc1RpbGVzZXQiLCBzdGF0aW9uc1RpbGVzZXRJbWFnZSkuYWRkKCJiYWNrZ3JvdW5kVGlsZXNldCIsIGJhY2tncm91bmRUaWxlc2V0SW1hZ2UpLmxvYWQoZnVuY3Rpb24gKGxvYWRlciwgcmVzb3VyY2VzKSB7CiAgICAgIC8vY3JvcCB0aWxlc2V0cyB0byBnZXQgdGlsZXMgdGV4dHVyZXMKICAgICAgdmFyIHBhdGhzVGV4dHVyZXMgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aHNUaWxlc2V0RGltZW5zaW9uLndpZHRoICogcGF0aHNUaWxlc2V0RGltZW5zaW9uLmhlaWdodDsgaSsrKSB7CiAgICAgICAgdmFyIHggPSBpICUgcGF0aHNUaWxlc2V0RGltZW5zaW9uLndpZHRoOwogICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihpIC8gcGF0aHNUaWxlc2V0RGltZW5zaW9uLndpZHRoKTsKICAgICAgICBwYXRoc1RleHR1cmVzW2ldID0gbmV3IFBJWEkuVGV4dHVyZShyZXNvdXJjZXMucGF0aHNUaWxlc2V0LnRleHR1cmUsIG5ldyBQSVhJLlJlY3RhbmdsZSh4ICogdGlsZVNpemUsIHkgKiB0aWxlU2l6ZSwgdGlsZVNpemUsIHRpbGVTaXplKSk7CiAgICAgIH0KCiAgICAgIHZhciBzdGF0aW9uc1RleHR1cmVzID0gW107CgogICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgc3RhdGlvbnNUaWxlc2V0RGltZW5zaW9uLndpZHRoICogc3RhdGlvbnNUaWxlc2V0RGltZW5zaW9uLmhlaWdodDsgX2krKykgewogICAgICAgIHZhciBfeCA9IF9pICUgc3RhdGlvbnNUaWxlc2V0RGltZW5zaW9uLndpZHRoOwoKICAgICAgICB2YXIgX3kgPSBNYXRoLmZsb29yKF9pIC8gc3RhdGlvbnNUaWxlc2V0RGltZW5zaW9uLndpZHRoKTsKCiAgICAgICAgc3RhdGlvbnNUZXh0dXJlc1tfaV0gPSBuZXcgUElYSS5UZXh0dXJlKHJlc291cmNlcy5zdGF0aW9uc1RpbGVzZXQudGV4dHVyZSwgbmV3IFBJWEkuUmVjdGFuZ2xlKF94ICogdGlsZVNpemUsIF95ICogdGlsZVNpemUsIHRpbGVTaXplLCB0aWxlU2l6ZSkpOwogICAgICB9CgogICAgICB2YXIgYmFja2dyb3VuZFRleHR1cmVzID0gW107CgogICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBiYWNrZ3JvdW5kVGlsZXNldERpbWVuc2lvbi53aWR0aCAqIGJhY2tncm91bmRUaWxlc2V0RGltZW5zaW9uLmhlaWdodDsgX2kyKyspIHsKICAgICAgICB2YXIgX3gyID0gX2kyICUgYmFja2dyb3VuZFRpbGVzZXREaW1lbnNpb24ud2lkdGg7CgogICAgICAgIHZhciBfeTIgPSBNYXRoLmZsb29yKF9pMiAvIGJhY2tncm91bmRUaWxlc2V0RGltZW5zaW9uLndpZHRoKTsKCiAgICAgICAgYmFja2dyb3VuZFRleHR1cmVzW19pMl0gPSBuZXcgUElYSS5UZXh0dXJlKHJlc291cmNlcy5iYWNrZ3JvdW5kVGlsZXNldC50ZXh0dXJlLCBuZXcgUElYSS5SZWN0YW5nbGUoX3gyICogdGlsZVNpemUsIF95MiAqIHRpbGVTaXplLCB0aWxlU2l6ZSwgdGlsZVNpemUpKTsKICAgICAgfQoKICAgICAgdmFyIGxpbmtzID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7CiAgICAgIHZhciBiYWNrZ3JvdW5kID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7CgogICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBtYXBEaW1lbnNpb24uaGVpZ2h0OyByb3crKykgewogICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG1hcERpbWVuc2lvbi53aWR0aDsgY29sKyspIHsKICAgICAgICAgIHZhciBwYXRoVGV4dHVyZSA9IHBhdGhzVGV4dHVyZXNbcGF0aHNbcm93XVtjb2xdXTsKICAgICAgICAgIHZhciBwYXRoU3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKHBhdGhUZXh0dXJlKTsKICAgICAgICAgIHBhdGhTcHJpdGUueCA9IHRpbGVTaXplICogY29sOwogICAgICAgICAgcGF0aFNwcml0ZS55ID0gdGlsZVNpemUgKiByb3c7CiAgICAgICAgICBsaW5rcy5hZGRDaGlsZChwYXRoU3ByaXRlKTsKICAgICAgICAgIHZhciBiYWNrZ3JvdW5kVGV4dHVyZSA9IGJhY2tncm91bmRUZXh0dXJlc1tiYWNrZ3JvdW5kc1tyb3ddW2NvbF1dOwogICAgICAgICAgdmFyIGJhY2tncm91bmRTcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUoYmFja2dyb3VuZFRleHR1cmUpOwogICAgICAgICAgYmFja2dyb3VuZFNwcml0ZS54ID0gdGlsZVNpemUgKiBjb2w7CiAgICAgICAgICBiYWNrZ3JvdW5kU3ByaXRlLnkgPSB0aWxlU2l6ZSAqIHJvdzsKICAgICAgICAgIGJhY2tncm91bmQuYWRkQ2hpbGQoYmFja2dyb3VuZFNwcml0ZSk7CiAgICAgICAgfQogICAgICB9IC8vYXBwLnN0YWdlLmFkZENoaWxkKGJhY2tncm91bmQpOwoKCiAgICAgIGFwcC5zdGFnZS5hZGRDaGlsZChsaW5rcyk7CiAgICAgIGFwcC5zdGFnZS5hZGRDaGlsZChnZXRDb250YWluZXJGcm9tU3RhdGlvbnMoc3RhdGlvbnMsIHRpbGVTaXplLCBzdGF0aW9uc1RleHR1cmVzKSk7CiAgICB9KTsKICAgIGFwcC5sb2FkZXIub25FcnJvci5hZGQoZnVuY3Rpb24gKGUpIHsKICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgIH0pOwoKICAgIGZ1bmN0aW9uIG1vdXNlRG93bigpIHsKICAgICAgZHJhZ2dpbmcudmFsdWUgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIG1vdXNlTW92ZShldmVudCkgewogICAgICBpZiAoZHJhZ2dpbmcudmFsdWUpIHsKICAgICAgICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5zdHlsZS5jdXJzb3IgPSAibW92ZSI7CiAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuc2Nyb2xsTGVmdCAtPSBldmVudC5tb3ZlbWVudFg7CiAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuc2Nyb2xsVG9wIC09IGV2ZW50Lm1vdmVtZW50WTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIG1vdXNlVXAoZXZlbnQpIHsKICAgICAgZHJhZ2dpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuc3R5bGUuY3Vyc29yID0gImF1dG8iOwogICAgfQoKICAgIGZ1bmN0aW9uIHpvb20oZXZlbnQpIHsKICAgICAgdmFyIHpvb21GYWN0b3IgPSAxOwoKICAgICAgaWYgKGRlbHRhWS52YWx1ZSArIGV2ZW50LmRlbHRhWSA8IDApIHsKICAgICAgICBkZWx0YVkudmFsdWUgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGRlbHRhWS52YWx1ZSArPSBldmVudC5kZWx0YVk7CiAgICAgICAgem9vbUZhY3RvciA9IE1hdGgucG93KHpvb21GdW5jdGlvbkJhc2UsIGV2ZW50LmRlbHRhWSAvIG1vdXNlV2hlZWxSZWR1Y3Rpb25GYWN0b3IpOwogICAgICB9CgogICAgICB2YXIgcGFuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubWFwLW1hbmFnZXJfX21haW4tcGFuZWwiKTsKICAgICAgdmFyIHNMID0gZXZlbnQub2Zmc2V0WCAqICh6b29tRmFjdG9yIC0gMSkgKyBwYW5lbC5zY3JvbGxMZWZ0ICogem9vbUZhY3RvcjsKICAgICAgdmFyIHNUID0gZXZlbnQub2Zmc2V0WSAqICh6b29tRmFjdG9yIC0gMSkgKyBwYW5lbC5zY3JvbGxUb3AgKiB6b29tRmFjdG9yOwogICAgICBwYW5lbC5zY3JvbGxMZWZ0ID0gTWF0aC5yb3VuZChzTCk7CiAgICAgIHBhbmVsLnNjcm9sbFRvcCA9IE1hdGgucm91bmQoc1QpOwogICAgfQoKICAgIG9uTW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYXAtbWFuYWdlcl9fbWFpbi1wYW5lbCIpLmFwcGVuZENoaWxkKGFwcC52aWV3KTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCBrZXlQcmVzc2VkKTsKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgc2NhbGU6IHNjYWxlLAogICAgICBtb3VzZURvd246IG1vdXNlRG93biwKICAgICAgbW91c2VNb3ZlOiBtb3VzZU1vdmUsCiAgICAgIG1vdXNlVXA6IG1vdXNlVXAsCiAgICAgIHpvb206IHpvb20KICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/unseen.papero.tk/src/components/gamePhaseComponents/MapManager.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"map-manager__main-panel\"\r\n       id=\"map-manager__main-panel\"\r\n       @mousedown=\"mouseDown\"\r\n       @mousemove=\"mouseMove\"\r\n       @mouseup=\"mouseUp\"></div>\r\n</template>\r\n\r\n<script>\r\nimport *  as PIXI from \"pixi.js-legacy\";\r\nimport {\r\n  backgroundTilesetDimension,\r\n  //getContainerFromPathObject,\r\n  getContainerFromStations,\r\n  keyPressed,\r\n  mapDimension,\r\n  mouseWheelReductionFactor,\r\n  pathsTilesetDimension,\r\n  stationsTilesetDimension,\r\n  tileSize,\r\n  zoomFunctionBase\r\n} from \"../../constants/mapConstants\";\r\nimport stations from \"../../constants/stations\";\r\nimport {onMounted, computed, ref} from \"vue\";\r\nimport pathsTilesetImage from \"../../assets/pathsTileset.png\";\r\nimport stationsTilesetImage from \"../../assets/stationsTileset.png\";\r\nimport backgroundTilesetImage from \"../../assets/backgroundTileset.png\";\r\nimport paths from \"../../constants/paths\";\r\nimport backgrounds from \"../../constants/background\";\r\nexport default {\r\n  name: \"MapManager\",\r\n  setup() {\r\n    const deltaY = ref(0);\r\n    const dragging = ref(false);\r\n    const scale = computed(function (){\r\n      return Math.pow(zoomFunctionBase, deltaY.value/mouseWheelReductionFactor);\r\n    });\r\n\r\n    const app = new PIXI.Application({\r\n      width: tileSize * mapDimension.width,\r\n      height: tileSize * mapDimension.height,\r\n      transparent: true,\r\n      antialias: false\r\n    });\r\n\r\n    PIXI.settings.ROUND_PIXELS = true;\r\n\r\n    app.loader\r\n        .add(\"pathsTileset\", pathsTilesetImage)\r\n        .add(\"stationsTileset\", stationsTilesetImage)\r\n        .add(\"backgroundTileset\", backgroundTilesetImage)\r\n        .load((loader, resources) => {\r\n\r\n          //crop tilesets to get tiles textures\r\n\r\n          let pathsTextures = [];\r\n          for (let i = 0; i < pathsTilesetDimension.width * pathsTilesetDimension.height; i++) {\r\n            let x = i % pathsTilesetDimension.width;\r\n            let y = Math.floor(i / pathsTilesetDimension.width);\r\n            pathsTextures[i] = new PIXI.Texture(\r\n                resources.pathsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          let stationsTextures = [];\r\n          for (let i = 0; i < stationsTilesetDimension.width * stationsTilesetDimension.height; i++) {\r\n            let x = i % stationsTilesetDimension.width;\r\n            let y = Math.floor(i / stationsTilesetDimension.width);\r\n            stationsTextures[i] = new PIXI.Texture(\r\n                resources.stationsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          let backgroundTextures = [];\r\n          for (let i = 0; i < backgroundTilesetDimension.width * backgroundTilesetDimension.height; i++) {\r\n            let x = i % backgroundTilesetDimension.width;\r\n            let y = Math.floor(i / backgroundTilesetDimension.width);\r\n            backgroundTextures[i] = new PIXI.Texture(\r\n                resources.backgroundTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          let links = new PIXI.Container();\r\n          let background = new PIXI.Container();\r\n          for (let row = 0; row < mapDimension.height; row++){\r\n            for (let col = 0; col < mapDimension.width; col++){\r\n              let pathTexture = pathsTextures[paths[row][col]];\r\n              let pathSprite = new PIXI.Sprite(pathTexture);\r\n              pathSprite.x = tileSize * col;\r\n              pathSprite.y = tileSize * row;\r\n              links.addChild(pathSprite);\r\n\r\n              let backgroundTexture = backgroundTextures[backgrounds[row][col]];\r\n              let backgroundSprite = new PIXI.Sprite(backgroundTexture);\r\n              backgroundSprite.x = tileSize * col;\r\n              backgroundSprite.y = tileSize * row;\r\n              background.addChild(backgroundSprite);\r\n            }\r\n          }\r\n          //app.stage.addChild(background);\r\n          app.stage.addChild(links);\r\n          app.stage.addChild(getContainerFromStations(stations, tileSize, stationsTextures));\r\n        });\r\n\r\n\r\n    app.loader.onError.add((e)=>{\r\n      console.error(e);\r\n    });\r\n\r\n    function mouseDown() {\r\n      dragging.value = true;\r\n    }\r\n\r\n    function mouseMove(event) {\r\n      if(dragging.value){\r\n        event.target.parentNode.style.cursor = \"move\";\r\n        event.target.parentNode.scrollLeft -= event.movementX;\r\n        event.target.parentNode.scrollTop -= event.movementY;\r\n      }\r\n    }\r\n\r\n    function mouseUp(event) {\r\n      dragging.value = false;\r\n      event.target.parentNode.style.cursor = \"auto\";\r\n    }\r\n\r\n    function zoom(event) {\r\n      let zoomFactor = 1;\r\n      if(deltaY.value+event.deltaY<0){\r\n        deltaY.value = 0;\r\n      } else {\r\n        deltaY.value += event.deltaY;\r\n        zoomFactor = Math.pow(zoomFunctionBase, event.deltaY/mouseWheelReductionFactor);\r\n      }\r\n      let panel = document.querySelector(\".map-manager__main-panel\");\r\n      let sL = event.offsetX*(zoomFactor-1)+panel.scrollLeft*zoomFactor;\r\n      let sT = event.offsetY*(zoomFactor-1)+panel.scrollTop*zoomFactor;\r\n      panel.scrollLeft = Math.round(sL);\r\n      panel.scrollTop = Math.round(sT);\r\n    }\r\n\r\n    onMounted(() => {\r\n      document.getElementById(\"map-manager__main-panel\").appendChild(app.view);\r\n      window.addEventListener(\"keydown\", keyPressed);\r\n    });\r\n\r\n    return{\r\n      scale,\r\n      mouseDown,\r\n      mouseMove,\r\n      mouseUp,\r\n      zoom\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.map-manager__main-panel{\r\n  overflow: hidden;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 0 20px 20px 0;\r\n}\r\n</style>"],"sourceRoot":""}]}