{"remainingRequest":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\src\\components\\gamePhaseComponents\\MapManager.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\src\\components\\gamePhaseComponents\\MapManager.vue","mtime":1616491267441},{"path":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615312359986},{"path":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1615312383663},{"path":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\babel-loader\\lib\\index.js","mtime":1615312359489},{"path":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615312359986},{"path":"C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1615312384341}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXRoLnNpZ24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuYW5jaG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAqIGFzIFBJWEkgZnJvbSAicGl4aS5qcy1sZWdhY3kiOwppbXBvcnQgbWl0dCBmcm9tICJtaXR0IjsKaW1wb3J0IHsga2V5UHJlc3NlZCwgdGlsZXNldHNEaW1lbnNpb24sIG1hcERpbWVuc2lvbiwgdGlsZVNpemUsIHpvb21BbmRQYW5QYXJhbXMgfSBmcm9tICIuLi8uLi9jb25zdGFudHMvbWFwQ29uc3RhbnRzIjsKaW1wb3J0IHN0YXRpb25zIGZyb20gIi4uLy4uL2NvbnN0YW50cy9zdGF0aW9ucyI7CmltcG9ydCB7IG9uTW91bnRlZCwgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IHBhdGhzVGlsZXNldEltYWdlIGZyb20gIi4uLy4uL2Fzc2V0cy90aWxlc2V0cy9wYXRoc1RpbGVzZXQucG5nIjsKaW1wb3J0IHN0YXRpb25zVGlsZXNldEltYWdlIGZyb20gIi4uLy4uL2Fzc2V0cy90aWxlc2V0cy9zdGF0aW9uc1RpbGVzZXQucG5nIjsKaW1wb3J0IHN0cmVldHNUaWxlc2V0SW1hZ2UgZnJvbSAiLi4vLi4vYXNzZXRzL3RpbGVzZXRzL3N0cmVldHNUaWxlc2V0LnBuZyI7CmltcG9ydCBidWlsZGluZ3NUaWxlc2V0SW1hZ2UgZnJvbSAiLi4vLi4vYXNzZXRzL3RpbGVzZXRzL2J1aWxkaW5nc1RpbGVzZXQucG5nIjsKaW1wb3J0IGJhY2tncm91bmRUaWxlc2V0SW1hZ2UgZnJvbSAiLi4vLi4vYXNzZXRzL3RpbGVzZXRzL2JhY2tncm91bmRUaWxlc2V0LnBuZyI7CmltcG9ydCBwYXduc1RpbGVzZXRJbWFnZSBmcm9tICIuLi8uLi9hc3NldHMvdGlsZXNldHMvcGF3bnNUaWxlc2V0LnBuZyI7CmltcG9ydCBwYXRocyBmcm9tICIuLi8uLi9jb25zdGFudHMvcGF0aHMiOwppbXBvcnQgc3RyZWV0cyBmcm9tICIuLi8uLi9jb25zdGFudHMvc3RyZWV0cyI7CmltcG9ydCBidWlsZGluZ3MgZnJvbSAiLi4vLi4vY29uc3RhbnRzL2J1aWxkaW5ncyI7CmltcG9ydCBiYWNrZ3JvdW5kIGZyb20gIi4uLy4uL2NvbnN0YW50cy9iYWNrZ3JvdW5kIjsKaW1wb3J0IHJlbmRlcmVyIGZyb20gIi4uLy4uL21vZHVsZXMvcmVuZGVyZXIiOwp3aW5kb3cubWl0dCA9IHdpbmRvdy5taXR0IHx8IG5ldyBtaXR0KCk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWFwTWFuYWdlciIsCiAgcHJvcHM6IHsKICAgIHBsYXllcnM6IEFycmF5LAogICAgY3VycmVudFBsYXllcjogT2JqZWN0LAogICAgYXV0b1pvb206IEJvb2xlYW4KICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgY3R4KSB7CiAgICB2YXIgYXBwID0gbmV3IFBJWEkuQXBwbGljYXRpb24oewogICAgICB3aWR0aDogdGlsZVNpemUgKiBtYXBEaW1lbnNpb24ud2lkdGgsCiAgICAgIGhlaWdodDogdGlsZVNpemUgKiBtYXBEaW1lbnNpb24uaGVpZ2h0LAogICAgICBiYWNrZ3JvdW5kQ29sb3I6IDB4ZjdmN2Y3LAogICAgICBhbnRpYWxpYXM6IGZhbHNlCiAgICB9KTsKICAgIHZhciB0aWNrZXIgPSBQSVhJLlRpY2tlci5zaGFyZWQ7CiAgICB0aWNrZXIuYXV0b1N0YXJ0ID0gZmFsc2U7CiAgICB0aWNrZXIuc3RvcCgpOwogICAgUElYSS5zZXR0aW5ncy5ST1VORF9QSVhFTFMgPSB0cnVlOwogICAgYXBwLmxvYWRlci5hZGQoInBhdGhzVGlsZXNldCIsIHBhdGhzVGlsZXNldEltYWdlKS5hZGQoInN0YXRpb25zVGlsZXNldCIsIHN0YXRpb25zVGlsZXNldEltYWdlKS5hZGQoInN0cmVldHNUaWxlc2V0Iiwgc3RyZWV0c1RpbGVzZXRJbWFnZSkuYWRkKCJidWlsZGluZ3NUaWxlc2V0IiwgYnVpbGRpbmdzVGlsZXNldEltYWdlKS5hZGQoImJhY2tncm91bmRUaWxlc2V0IiwgYmFja2dyb3VuZFRpbGVzZXRJbWFnZSkuYWRkKCJwYXduc1RpbGVzZXQiLCBwYXduc1RpbGVzZXRJbWFnZSkubG9hZChmdW5jdGlvbiAobG9hZGVyLCByZXNvdXJjZXMpIHsKICAgICAgLy9jcm9wIHRpbGVzZXRzIHRvIGdldCB0aWxlcyB0ZXh0dXJlcwogICAgICB2YXIgdGV4dHVyZXMgPSB7CiAgICAgICAgcGF0aHM6IFtdLAogICAgICAgIHN0YXRpb25zOiBbXSwKICAgICAgICBzdHJlZXRzOiBbXSwKICAgICAgICBidWlsZGluZ3M6IFtdLAogICAgICAgIGJhY2tncm91bmRzOiBbXSwKICAgICAgICBwYXduczogW10KICAgICAgfTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGlsZXNldHNEaW1lbnNpb24ucGF0aHMud2lkdGggKiB0aWxlc2V0c0RpbWVuc2lvbi5wYXRocy5oZWlnaHQ7IGkrKykgewogICAgICAgIHZhciB4ID0gaSAlIHRpbGVzZXRzRGltZW5zaW9uLnBhdGhzLndpZHRoOwogICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihpIC8gdGlsZXNldHNEaW1lbnNpb24ucGF0aHMud2lkdGgpOwogICAgICAgIHRleHR1cmVzLnBhdGhzW2ldID0gbmV3IFBJWEkuVGV4dHVyZShyZXNvdXJjZXMucGF0aHNUaWxlc2V0LnRleHR1cmUsIG5ldyBQSVhJLlJlY3RhbmdsZSh4ICogdGlsZVNpemUsIHkgKiB0aWxlU2l6ZSwgdGlsZVNpemUsIHRpbGVTaXplKSk7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCB0aWxlc2V0c0RpbWVuc2lvbi5zdGF0aW9ucy53aWR0aCAqIHRpbGVzZXRzRGltZW5zaW9uLnN0YXRpb25zLmhlaWdodDsgX2krKykgewogICAgICAgIHZhciBfeCA9IF9pICUgdGlsZXNldHNEaW1lbnNpb24uc3RhdGlvbnMud2lkdGg7CgogICAgICAgIHZhciBfeSA9IE1hdGguZmxvb3IoX2kgLyB0aWxlc2V0c0RpbWVuc2lvbi5zdGF0aW9ucy53aWR0aCk7CgogICAgICAgIHRleHR1cmVzLnN0YXRpb25zW19pXSA9IG5ldyBQSVhJLlRleHR1cmUocmVzb3VyY2VzLnN0YXRpb25zVGlsZXNldC50ZXh0dXJlLCBuZXcgUElYSS5SZWN0YW5nbGUoX3ggKiB0aWxlU2l6ZSwgX3kgKiB0aWxlU2l6ZSwgdGlsZVNpemUsIHRpbGVTaXplKSk7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IHRpbGVzZXRzRGltZW5zaW9uLnN0cmVldHMud2lkdGggKiB0aWxlc2V0c0RpbWVuc2lvbi5zdHJlZXRzLmhlaWdodDsgX2kyKyspIHsKICAgICAgICB2YXIgX3gyID0gX2kyICUgdGlsZXNldHNEaW1lbnNpb24uc3RyZWV0cy53aWR0aDsKCiAgICAgICAgdmFyIF95MiA9IE1hdGguZmxvb3IoX2kyIC8gdGlsZXNldHNEaW1lbnNpb24uc3RyZWV0cy53aWR0aCk7CgogICAgICAgIHRleHR1cmVzLnN0cmVldHNbX2kyXSA9IG5ldyBQSVhJLlRleHR1cmUocmVzb3VyY2VzLnN0cmVldHNUaWxlc2V0LnRleHR1cmUsIG5ldyBQSVhJLlJlY3RhbmdsZShfeDIgKiB0aWxlU2l6ZSwgX3kyICogdGlsZVNpemUsIHRpbGVTaXplLCB0aWxlU2l6ZSkpOwogICAgICB9CgogICAgICBmb3IgKHZhciBfaTMgPSAwOyBfaTMgPCB0aWxlc2V0c0RpbWVuc2lvbi5idWlsZGluZ3Mud2lkdGggKiB0aWxlc2V0c0RpbWVuc2lvbi5idWlsZGluZ3MuaGVpZ2h0OyBfaTMrKykgewogICAgICAgIHZhciBfeDMgPSBfaTMgJSB0aWxlc2V0c0RpbWVuc2lvbi5idWlsZGluZ3Mud2lkdGg7CgogICAgICAgIHZhciBfeTMgPSBNYXRoLmZsb29yKF9pMyAvIHRpbGVzZXRzRGltZW5zaW9uLmJ1aWxkaW5ncy53aWR0aCk7CgogICAgICAgIHRleHR1cmVzLmJ1aWxkaW5nc1tfaTNdID0gbmV3IFBJWEkuVGV4dHVyZShyZXNvdXJjZXMuYnVpbGRpbmdzVGlsZXNldC50ZXh0dXJlLCBuZXcgUElYSS5SZWN0YW5nbGUoX3gzICogdGlsZVNpemUsIF95MyAqIHRpbGVTaXplLCB0aWxlU2l6ZSwgdGlsZVNpemUpKTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgX2k0ID0gMDsgX2k0IDwgdGlsZXNldHNEaW1lbnNpb24uYmFja2dyb3VuZC53aWR0aCAqIHRpbGVzZXRzRGltZW5zaW9uLmJhY2tncm91bmQuaGVpZ2h0OyBfaTQrKykgewogICAgICAgIHZhciBfeDQgPSBfaTQgJSB0aWxlc2V0c0RpbWVuc2lvbi5iYWNrZ3JvdW5kLndpZHRoOwoKICAgICAgICB2YXIgX3k0ID0gTWF0aC5mbG9vcihfaTQgLyB0aWxlc2V0c0RpbWVuc2lvbi5iYWNrZ3JvdW5kLndpZHRoKTsKCiAgICAgICAgdGV4dHVyZXMuYmFja2dyb3VuZHNbX2k0XSA9IG5ldyBQSVhJLlRleHR1cmUocmVzb3VyY2VzLmJhY2tncm91bmRUaWxlc2V0LnRleHR1cmUsIG5ldyBQSVhJLlJlY3RhbmdsZShfeDQgKiB0aWxlU2l6ZSwgX3k0ICogdGlsZVNpemUsIHRpbGVTaXplLCB0aWxlU2l6ZSkpOwogICAgICB9CgogICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCB0aWxlc2V0c0RpbWVuc2lvbi5wYXducy53aWR0aCAqIHRpbGVzZXRzRGltZW5zaW9uLnBhd25zLmhlaWdodDsgX2k1KyspIHsKICAgICAgICB2YXIgX3g1ID0gX2k1ICUgdGlsZXNldHNEaW1lbnNpb24ucGF3bnMud2lkdGg7CgogICAgICAgIHZhciBfeTUgPSBNYXRoLmZsb29yKF9pNSAvIHRpbGVzZXRzRGltZW5zaW9uLnBhd25zLndpZHRoKTsKCiAgICAgICAgdGV4dHVyZXMucGF3bnNbX2k1XSA9IG5ldyBQSVhJLlRleHR1cmUocmVzb3VyY2VzLnBhd25zVGlsZXNldC50ZXh0dXJlLCBuZXcgUElYSS5SZWN0YW5nbGUoX3g1ICogdGlsZVNpemUsIF95NSAqIHRpbGVTaXplLCB0aWxlU2l6ZSwgdGlsZVNpemUpKTsKICAgICAgfQoKICAgICAgdmFyIHBhdGhzQ29udGFpbmVyID0gbmV3IFBJWEkuUGFydGljbGVDb250YWluZXIoMjUwMCk7CiAgICAgIHZhciBzdHJlZXRzQ29udGFpbmVyID0gbmV3IFBJWEkuUGFydGljbGVDb250YWluZXIoMjUwMCk7CiAgICAgIHZhciBidWlsZGluZ3NDb250YWluZXIgPSBuZXcgUElYSS5QYXJ0aWNsZUNvbnRhaW5lcigyNTAwKTsKICAgICAgdmFyIGJhY2tncm91bmRDb250YWluZXIgPSBuZXcgUElYSS5QYXJ0aWNsZUNvbnRhaW5lcigyNTAwKTsKCiAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1hcERpbWVuc2lvbi5oZWlnaHQ7IHJvdysrKSB7CiAgICAgICAgZm9yICh2YXIgY29sID0gMDsgY29sIDwgbWFwRGltZW5zaW9uLndpZHRoOyBjb2wrKykgewogICAgICAgICAgdmFyIHBhdGhDb2RlID0gcGF0aHNbcm93XVtjb2xdOwoKICAgICAgICAgIGlmIChwYXRoQ29kZSA+PSAwKSB7CiAgICAgICAgICAgIHZhciBwYXRoVGV4dHVyZSA9IHRleHR1cmVzLnBhdGhzW3BhdGhDb2RlXTsKICAgICAgICAgICAgdmFyIHBhdGhTcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUocGF0aFRleHR1cmUpOwogICAgICAgICAgICBwYXRoU3ByaXRlLnggPSB0aWxlU2l6ZSAqIGNvbDsKICAgICAgICAgICAgcGF0aFNwcml0ZS55ID0gdGlsZVNpemUgKiByb3c7CiAgICAgICAgICAgIHBhdGhzQ29udGFpbmVyLmFkZENoaWxkKHBhdGhTcHJpdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBzdHJlZXRDb2RlID0gc3RyZWV0c1tyb3ddW2NvbF07CgogICAgICAgICAgaWYgKHN0cmVldENvZGUgPj0gMCkgewogICAgICAgICAgICB2YXIgc3RyZWV0c1RleHR1cmUgPSB0ZXh0dXJlcy5zdHJlZXRzW3N0cmVldENvZGVdOwogICAgICAgICAgICB2YXIgc3RyZWV0c1Nwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZShzdHJlZXRzVGV4dHVyZSk7CiAgICAgICAgICAgIHN0cmVldHNTcHJpdGUueCA9IHRpbGVTaXplICogY29sOwogICAgICAgICAgICBzdHJlZXRzU3ByaXRlLnkgPSB0aWxlU2l6ZSAqIHJvdzsKICAgICAgICAgICAgc3RyZWV0c0NvbnRhaW5lci5hZGRDaGlsZChzdHJlZXRzU3ByaXRlKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgYnVpbGRpbmdDb2RlID0gYnVpbGRpbmdzW3Jvd11bY29sXTsKCiAgICAgICAgICBpZiAoYnVpbGRpbmdDb2RlID49IDApIHsKICAgICAgICAgICAgdmFyIGJ1aWxkaW5nc1RleHR1cmUgPSB0ZXh0dXJlcy5idWlsZGluZ3NbYnVpbGRpbmdDb2RlXTsKICAgICAgICAgICAgdmFyIGJ1aWxkaW5nc1Nwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZShidWlsZGluZ3NUZXh0dXJlKTsKICAgICAgICAgICAgYnVpbGRpbmdzU3ByaXRlLnggPSB0aWxlU2l6ZSAqIGNvbDsKICAgICAgICAgICAgYnVpbGRpbmdzU3ByaXRlLnkgPSB0aWxlU2l6ZSAqIHJvdzsKICAgICAgICAgICAgYnVpbGRpbmdzQ29udGFpbmVyLmFkZENoaWxkKGJ1aWxkaW5nc1Nwcml0ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGJhY2tncm91bmRDb2RlID0gYmFja2dyb3VuZFtyb3ddW2NvbF07CgogICAgICAgICAgaWYgKGJhY2tncm91bmRDb2RlID49IDApIHsKICAgICAgICAgICAgdmFyIGJhY2tncm91bmRUZXh0dXJlID0gdGV4dHVyZXMuYmFja2dyb3VuZHNbYmFja2dyb3VuZENvZGVdOwogICAgICAgICAgICB2YXIgYmFja2dyb3VuZFNwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZShiYWNrZ3JvdW5kVGV4dHVyZSk7CiAgICAgICAgICAgIGJhY2tncm91bmRTcHJpdGUueCA9IHRpbGVTaXplICogY29sOwogICAgICAgICAgICBiYWNrZ3JvdW5kU3ByaXRlLnkgPSB0aWxlU2l6ZSAqIHJvdzsKICAgICAgICAgICAgYmFja2dyb3VuZENvbnRhaW5lci5hZGRDaGlsZChiYWNrZ3JvdW5kU3ByaXRlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBzdGF0aW9uc0NvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpOwoKICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoX2k2KSB7CiAgICAgICAgdmFyIHNwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlcy5zdGF0aW9uc1tzdGF0aW9uc1tfaTZdLnR5cGVdKTsKICAgICAgICBzcHJpdGUueCA9IHRpbGVTaXplICogc3RhdGlvbnNbX2k2XS5wb2ludFswXTsKICAgICAgICBzcHJpdGUueSA9IHRpbGVTaXplICogc3RhdGlvbnNbX2k2XS5wb2ludFsxXTsKICAgICAgICB2YXIgY29sb3IgPSBzdGF0aW9uc1tfaTZdLnR5cGUgPT09IDIgPyAid2hpdGUiIDogImJsYWNrIjsKICAgICAgICB2YXIgbGFiZWwgPSBuZXcgUElYSS5UZXh0KHN0YXRpb25zW19pNl0ubnVtYmVyLCB7CiAgICAgICAgICBmb250RmFtaWx5OiAic2Fucy1zZXJpZiIsCiAgICAgICAgICBmb250V2VpZ2h0OiAiYm9sZCIsCiAgICAgICAgICBmaWxsOiBjb2xvcgogICAgICAgIH0pOwogICAgICAgIGxhYmVsLmFuY2hvci54ID0gbGFiZWwuYW5jaG9yLnkgPSAwLjU7CiAgICAgICAgbGFiZWwueCA9IHNwcml0ZS53aWR0aCAvIDI7CiAgICAgICAgbGFiZWwueSA9IHNwcml0ZS5oZWlnaHQgLyAyOwogICAgICAgIHNwcml0ZS5hZGRDaGlsZChsYWJlbCk7CiAgICAgICAgc3ByaXRlLmludGVyYWN0aXZlID0gdHJ1ZTsKICAgICAgICBzcHJpdGUuYnV0dG9uTW9kZSA9IHRydWU7CiAgICAgICAgc3RhdGlvbnNDb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlKTsKCiAgICAgICAgdmFyIGNsaWNrU3RhcnRzID0gZnVuY3Rpb24gY2xpY2tTdGFydHMoKSB7CiAgICAgICAgICBzcHJpdGUuY2xpY2tTdGFydGVkRGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIH07CgogICAgICAgIHZhciBjbGlja0VuZHMgPSBmdW5jdGlvbiBjbGlja0VuZHMoKSB7CiAgICAgICAgICBpZiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzcHJpdGUuY2xpY2tTdGFydGVkRGF0ZSA8IDEwMDApIGN0eC5lbWl0KCJzdGF0aW9uLWNsaWNrZWQiLCBfaTYgKyAxKTsKICAgICAgICB9OwoKICAgICAgICBzcHJpdGUub24oIm1vdXNlZG93biIsIGNsaWNrU3RhcnRzKTsKICAgICAgICBzcHJpdGUub24oInRvdWNoc3RhcnQiLCBjbGlja1N0YXJ0cyk7CiAgICAgICAgc3ByaXRlLm9uKCJtb3VzZXVwIiwgY2xpY2tFbmRzKTsKICAgICAgICBzcHJpdGUub24oInRvdWNoZW5kIiwgY2xpY2tFbmRzKTsKICAgICAgfTsKCiAgICAgIGZvciAodmFyIF9pNiA9IDA7IF9pNiA8IHN0YXRpb25zLmxlbmd0aDsgX2k2KyspIHsKICAgICAgICBfbG9vcChfaTYpOwogICAgICB9CgogICAgICBhcHAuc3RhZ2UuYWRkQ2hpbGQoYmFja2dyb3VuZENvbnRhaW5lcik7CiAgICAgIGFwcC5zdGFnZS5hZGRDaGlsZChidWlsZGluZ3NDb250YWluZXIpOwogICAgICBhcHAuc3RhZ2UuYWRkQ2hpbGQoc3RyZWV0c0NvbnRhaW5lcik7CiAgICAgIGFwcC5zdGFnZS5hZGRDaGlsZChwYXRoc0NvbnRhaW5lcik7CiAgICAgIGFwcC5zdGFnZS5hZGRDaGlsZChzdGF0aW9uc0NvbnRhaW5lcik7CiAgICAgIHZhciBwYXduc0NvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpOwogICAgICBwcm9wcy5wbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKHBsYXllcikgewogICAgICAgIHZhciB0ZXh0dXJlID0gdGV4dHVyZXMucGF3bnNbcGxheWVyLmNvbG9yICsgMV07CiAgICAgICAgdmFyIHNwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTsKCiAgICAgICAgaWYgKHBsYXllci5wb3NpdGlvbikgewogICAgICAgICAgdmFyIHBvaW50ID0gc3RhdGlvbnNbcGxheWVyLnBvc2l0aW9uIC0gMV0ucG9pbnQ7CiAgICAgICAgICBzcHJpdGUueCA9IHBvaW50WzBdICogdGlsZVNpemU7CiAgICAgICAgICBzcHJpdGUueSA9IHBvaW50WzFdICogdGlsZVNpemU7CiAgICAgICAgICBzcHJpdGUuaW50ZXJhY3RpdmUgPSB0cnVlOwoKICAgICAgICAgIHZhciBjbGlja1N0YXJ0cyA9IGZ1bmN0aW9uIGNsaWNrU3RhcnRzKCkgewogICAgICAgICAgICBzcHJpdGUuY2xpY2tTdGFydGVkRGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgfTsKCiAgICAgICAgICB2YXIgY2xpY2tFbmRzID0gZnVuY3Rpb24gY2xpY2tFbmRzKCkgewogICAgICAgICAgICBpZiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzcHJpdGUuY2xpY2tTdGFydGVkRGF0ZSA8IDEwMDApIGN0eC5lbWl0KCJzdGF0aW9uLWNsaWNrZWQiLCBwbGF5ZXIucG9zaXRpb24pOwogICAgICAgICAgfTsKCiAgICAgICAgICBzcHJpdGUub24oIm1vdXNlZG93biIsIGNsaWNrU3RhcnRzKTsKICAgICAgICAgIHNwcml0ZS5vbigidG91Y2hzdGFydCIsIGNsaWNrU3RhcnRzKTsKICAgICAgICAgIHNwcml0ZS5vbigibW91c2V1cCIsIGNsaWNrRW5kcyk7CiAgICAgICAgICBzcHJpdGUub24oInRvdWNoZW5kIiwgY2xpY2tFbmRzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3ByaXRlLnZpc2libGUgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHBhd25zQ29udGFpbmVyLmFkZENoaWxkKHNwcml0ZSk7CiAgICAgIH0pOwogICAgICBhcHAuc3RhZ2UuYWRkQ2hpbGQocGF3bnNDb250YWluZXIpOwoKICAgICAgdmFyIHVwZGF0ZVBhd25zID0gZnVuY3Rpb24gdXBkYXRlUGF3bnMocGxheWVycykgewogICAgICAgIHBsYXllcnMuZm9yRWFjaChmdW5jdGlvbiAocGxheWVyLCBpbmRleCkgewogICAgICAgICAgdmFyIHNwcml0ZSA9IHBhd25zQ29udGFpbmVyLmNoaWxkcmVuW2luZGV4XTsKCiAgICAgICAgICBpZiAocGxheWVyLnBvc2l0aW9uKSB7CiAgICAgICAgICAgIHNwcml0ZS52aXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgdmFyIHBvaW50ID0gc3RhdGlvbnNbcGxheWVyLnBvc2l0aW9uIC0gMV0ucG9pbnQ7CiAgICAgICAgICAgIHNwcml0ZS54ID0gcG9pbnRbMF0gKiB0aWxlU2l6ZTsKICAgICAgICAgICAgc3ByaXRlLnkgPSBwb2ludFsxXSAqIHRpbGVTaXplOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3ByaXRlLnZpc2libGUgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHdpbmRvdy5taXR0Lm9uKCJ1cGRhdGUtcGF3bnMiLCB1cGRhdGVQYXducyk7CiAgICB9KTsKICAgIGFwcC5sb2FkZXIub25FcnJvci5hZGQoZnVuY3Rpb24gKGUpIHsKICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgIH0pOwogICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1hcC1tYW5hZ2VyX19tYWluLXBhbmVsIikuYXBwZW5kQ2hpbGQoYXBwLnZpZXcpOwogICAgICB2YXIgZHJhZ2dpbmcgPSByZWYoZmFsc2UpOwogICAgICB2YXIgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCA8IDUwMSA/IHdpbmRvdy5pbm5lcldpZHRoIDogd2luZG93LmlubmVySGVpZ2h0ICogMS41OwogICAgICB2YXIgZGVmYXVsdFNjYWxlID0gd2lkdGggLyA2MCAvIDY0OwogICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1hcC1tYW5hZ2VyX19tYWluLXBhbmVsIik7CiAgICAgIHZhciBpbnN0YW5jZSA9IHJlbmRlcmVyKHsKICAgICAgICBtaW5TY2FsZTogTWF0aC5taW4oem9vbUFuZFBhblBhcmFtcy5taW5ab29tLCBkZWZhdWx0U2NhbGUpLAogICAgICAgIG1heFNjYWxlOiB6b29tQW5kUGFuUGFyYW1zLm1heFpvb20sCiAgICAgICAgZWxlbWVudDogY29udGFpbmVyLmNoaWxkcmVuWzBdLAogICAgICAgIHNjYWxlU2Vuc2l0aXZpdHk6IHpvb21BbmRQYW5QYXJhbXMuem9vbVNlbnNpYmlsaXR5LAogICAgICAgIGRlZmF1bHRTY2FsZTogZGVmYXVsdFNjYWxlLAogICAgICAgIGNvbnRhaW5lckRpbWVuc2lvbjogewogICAgICAgICAgd2lkdGg6IGNvbnRhaW5lci5jbGllbnRXaWR0aCwKICAgICAgICAgIGhlaWdodDogY29udGFpbmVyLmNsaWVudEhlaWdodAogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCA8IDUwMSA/IHdpbmRvdy5pbm5lcldpZHRoIDogd2luZG93LmlubmVySGVpZ2h0ICogMS41OwogICAgICAgIGRlZmF1bHRTY2FsZSA9IHdpZHRoIC8gNjAgLyA2NDsKICAgICAgICBpbnN0YW5jZSA9IHJlbmRlcmVyKHsKICAgICAgICAgIG1pblNjYWxlOiBNYXRoLm1pbih6b29tQW5kUGFuUGFyYW1zLm1pblpvb20sIGRlZmF1bHRTY2FsZSksCiAgICAgICAgICBtYXhTY2FsZTogem9vbUFuZFBhblBhcmFtcy5tYXhab29tLAogICAgICAgICAgZWxlbWVudDogY29udGFpbmVyLmNoaWxkcmVuWzBdLAogICAgICAgICAgc2NhbGVTZW5zaXRpdml0eTogem9vbUFuZFBhblBhcmFtcy56b29tU2Vuc2liaWxpdHksCiAgICAgICAgICBkZWZhdWx0U2NhbGU6IGRlZmF1bHRTY2FsZSwKICAgICAgICAgIGNvbnRhaW5lckRpbWVuc2lvbjogewogICAgICAgICAgICB3aWR0aDogY29udGFpbmVyLmNsaWVudFdpZHRoLAogICAgICAgICAgICBoZWlnaHQ6IGNvbnRhaW5lci5jbGllbnRIZWlnaHQKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICB2YXIgem9vbVRvUGF3biA9IGZ1bmN0aW9uIHpvb21Ub1Bhd24ocGxheWVyKSB7CiAgICAgICAgaW5zdGFuY2UudG9EZWZhdWx0KCk7CiAgICAgICAgaWYgKCFwbGF5ZXIucG9zaXRpb24pIHJldHVybjsKICAgICAgICB2YXIgeCA9IHRpbGVTaXplICogc3RhdGlvbnNbcGxheWVyLnBvc2l0aW9uIC0gMV0ucG9pbnRbMF0gKiBkZWZhdWx0U2NhbGU7CiAgICAgICAgdmFyIHkgPSB0aWxlU2l6ZSAqIHN0YXRpb25zW3BsYXllci5wb3NpdGlvbiAtIDFdLnBvaW50WzFdICogZGVmYXVsdFNjYWxlOwogICAgICAgIGluc3RhbmNlLnpvb20oewogICAgICAgICAgeDogeCwKICAgICAgICAgIHk6IHksCiAgICAgICAgICBkZWx0YVNjYWxlOiB6b29tQW5kUGFuUGFyYW1zLmRlZmF1bHRab29tCiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBpbnN0YW5jZS50b0RlZmF1bHQoKTsKICAgICAgaWYgKHByb3BzLmF1dG9ab29tICYmIHByb3BzLmN1cnJlbnRQbGF5ZXIpIHpvb21Ub1Bhd24ocHJvcHMuY3VycmVudFBsYXllcik7CiAgICAgIHdpbmRvdy5taXR0Lm9uKCJ6b29tLXRvLWRlZmF1bHQiLCBpbnN0YW5jZS50b0RlZmF1bHQpOwogICAgICB3aW5kb3cubWl0dC5vbigiem9vbS10by1wYXduIiwgem9vbVRvUGF3bik7CiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCJ3aGVlbCIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGluc3RhbmNlLnpvb20oewogICAgICAgICAgZGVsdGFTY2FsZTogTWF0aC5zaWduKGV2ZW50LmRlbHRhWSksCiAgICAgICAgICB4OiBldmVudC5wYWdlWCwKICAgICAgICAgIHk6IGV2ZW50LnBhZ2VZCiAgICAgICAgfSk7CiAgICAgIH0sIHsKICAgICAgICBwYXNzaXZlOiB0cnVlCiAgICAgIH0pOwogICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgZnVuY3Rpb24gKCkgewogICAgICAgIGRyYWdnaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICJtb3ZlIjsKICAgICAgfSk7CiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCJkYmxjbGljayIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGlmICghaW5zdGFuY2UuaXNUb0RlZmF1bHQoKSkgaW5zdGFuY2UudG9EZWZhdWx0KCk7ZWxzZSBpbnN0YW5jZS56b29tKHsKICAgICAgICAgIHg6IGV2ZW50LnBhZ2VYLAogICAgICAgICAgeTogZXZlbnQucGFnZVksCiAgICAgICAgICBkZWx0YVNjYWxlOiB6b29tQW5kUGFuUGFyYW1zLmRlZmF1bHRab29tCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgaWYgKCFkcmFnZ2luZy52YWx1ZSkgcmV0dXJuOwogICAgICAgIGluc3RhbmNlLnBhbkJ5KHsKICAgICAgICAgIG9yaWdpblg6IGV2ZW50Lm1vdmVtZW50WCwKICAgICAgICAgIG9yaWdpblk6IGV2ZW50Lm1vdmVtZW50WQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgZHJhZ2dpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICJkZWZhdWx0IjsKICAgICAgfSk7CiAgICAgIHZhciBwcmV2aW91c1RvdWNoOwogICAgICB2YXIgbGFzdE1pZGRsZVBvaW50OwogICAgICB2YXIgbGFzdERpc3RhbmNlOwoKICAgICAgdmFyIGdldERpc3RhbmNlRnJvbVRvdWNoZXMgPSBmdW5jdGlvbiBnZXREaXN0YW5jZUZyb21Ub3VjaGVzKHRvdWNoZXMpIHsKICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHRvdWNoZXNbMF0ucGFnZVggLSB0b3VjaGVzWzFdLnBhZ2VYLCAyKSArIE1hdGgucG93KHRvdWNoZXNbMF0ucGFnZVkgLSB0b3VjaGVzWzFdLnBhZ2VZLCAyKSk7CiAgICAgIH07CgogICAgICB2YXIgZ2V0TWlkZGxlUG9pbnRGcm9tVG91Y2hlcyA9IGZ1bmN0aW9uIGdldE1pZGRsZVBvaW50RnJvbVRvdWNoZXModG91Y2hlcykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB4OiAodG91Y2hlc1swXS5wYWdlWCArIHRvdWNoZXNbMV0ucGFnZVgpIC8gMiwKICAgICAgICAgIHk6ICh0b3VjaGVzWzBdLnBhZ2VZICsgdG91Y2hlc1sxXS5wYWdlWSkgLyAyCiAgICAgICAgfTsKICAgICAgfTsKCiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoIDw9IDIpIHsKICAgICAgICAgIHByZXZpb3VzVG91Y2ggPSBldmVudDsKCiAgICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDIpIHsKICAgICAgICAgICAgbGFzdERpc3RhbmNlID0gZ2V0RGlzdGFuY2VGcm9tVG91Y2hlcyhldmVudC50b3VjaGVzKTsKICAgICAgICAgICAgbGFzdE1pZGRsZVBvaW50ID0gZ2V0TWlkZGxlUG9pbnRGcm9tVG91Y2hlcyhldmVudC50b3VjaGVzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBwYXNzaXZlOiB0cnVlCiAgICAgIH0pOwogICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICB2YXIgZHggPSBldmVudC50b3VjaGVzWzBdLnBhZ2VYIC0gcHJldmlvdXNUb3VjaC50b3VjaGVzWzBdLnBhZ2VYOwogICAgICAgICAgdmFyIGR5ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWSAtIHByZXZpb3VzVG91Y2gudG91Y2hlc1swXS5wYWdlWTsKICAgICAgICAgIGluc3RhbmNlLnBhbkJ5KHsKICAgICAgICAgICAgb3JpZ2luWDogZHgsCiAgICAgICAgICAgIG9yaWdpblk6IGR5CiAgICAgICAgICB9KTsKICAgICAgICAgIHByZXZpb3VzVG91Y2ggPSBldmVudDsKICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBnZXREaXN0YW5jZUZyb21Ub3VjaGVzKGV2ZW50LnRvdWNoZXMpOwogICAgICAgICAgdmFyIGRlbHRhU2NhbGUgPSBNYXRoLnNpZ24oZGlzdGFuY2UgLyBsYXN0RGlzdGFuY2UgLSAxKSAvIDI7CgogICAgICAgICAgdmFyIF9nZXRNaWRkbGVQb2ludEZyb21UbyA9IGdldE1pZGRsZVBvaW50RnJvbVRvdWNoZXMoZXZlbnQudG91Y2hlcyksCiAgICAgICAgICAgICAgeCA9IF9nZXRNaWRkbGVQb2ludEZyb21Uby54LAogICAgICAgICAgICAgIHkgPSBfZ2V0TWlkZGxlUG9pbnRGcm9tVG8ueTsKCiAgICAgICAgICBpbnN0YW5jZS56b29tKHsKICAgICAgICAgICAgeDogeCwKICAgICAgICAgICAgeTogeSwKICAgICAgICAgICAgZGVsdGFTY2FsZTogZGVsdGFTY2FsZQogICAgICAgICAgfSk7CiAgICAgICAgICBpbnN0YW5jZS5wYW5CeSh7CiAgICAgICAgICAgIG9yaWdpblg6IHggLSBsYXN0TWlkZGxlUG9pbnQueCwKICAgICAgICAgICAgb3JpZ2luWTogeSAtIGxhc3RNaWRkbGVQb2ludC55CiAgICAgICAgICB9KTsKICAgICAgICAgIGxhc3RNaWRkbGVQb2ludCA9IHsKICAgICAgICAgICAgeDogeCwKICAgICAgICAgICAgeTogeQogICAgICAgICAgfTsKICAgICAgICAgIGxhc3REaXN0YW5jZSA9IGRpc3RhbmNlOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIHBhc3NpdmU6IHRydWUKICAgICAgfSk7CiAgICAgIHZhciBsYXN0VGltZXN0YW1wOwogICAgICB2YXIgbGFzdFBvc2l0aW9uczsKICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoZW5kIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgaWYgKGxhc3RUaW1lc3RhbXAgJiYgbGFzdFBvc2l0aW9ucykgewogICAgICAgICAgaWYgKGV2ZW50LnRpbWVTdGFtcCAtIGxhc3RUaW1lc3RhbXAgPCB6b29tQW5kUGFuUGFyYW1zLmRvdWJsZVRhcFRpbWVUb2xlcmFuY2UpIHsKICAgICAgICAgICAgaWYgKGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICAgIGlmIChNYXRoLmFicyhldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCAtIGxhc3RQb3NpdGlvbnMucGFnZVgpIDwgem9vbUFuZFBhblBhcmFtcy5kb3VibGVUYXBEaXN0YW5jZVRvbGVyYW5jZSkgewogICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZIC0gbGFzdFBvc2l0aW9ucy5wYWdlWSkgPCB6b29tQW5kUGFuUGFyYW1zLmRvdWJsZVRhcERpc3RhbmNlVG9sZXJhbmNlKSB7CiAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgIGlmICghaW5zdGFuY2UuaXNUb0RlZmF1bHQoKSkgaW5zdGFuY2UudG9EZWZhdWx0KCk7ZWxzZSBpbnN0YW5jZS56b29tKHsKICAgICAgICAgICAgICAgICAgICB4OiBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCwKICAgICAgICAgICAgICAgICAgICB5OiBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWSwKICAgICAgICAgICAgICAgICAgICBkZWx0YVNjYWxlOiB6b29tQW5kUGFuUGFyYW1zLmRlZmF1bHRab29tCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbGFzdFRpbWVzdGFtcCA9IGV2ZW50LnRpbWVTdGFtcDsKICAgICAgICBsYXN0UG9zaXRpb25zID0gewogICAgICAgICAgcGFnZVg6IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLAogICAgICAgICAgcGFnZVk6IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIGtleVByZXNzZWQoZXZlbnQsIGluc3RhbmNlKTsKICAgICAgfSk7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\matte\\Desktop\\papero\\unseen.papero.tk\\src\\components\\gamePhaseComponents\\MapManager.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"map-manager__main-panel\" id=\"map-manager__main-panel\"></div>\r\n</template>\r\n\r\n<script>\r\nimport *  as PIXI from \"pixi.js-legacy\";\r\nimport mitt from \"mitt\";\r\nimport {\r\n  keyPressed,\r\n  tilesetsDimension,\r\n  mapDimension,\r\n  tileSize,\r\n  zoomAndPanParams\r\n} from \"../../constants/mapConstants\";\r\nimport stations from \"../../constants/stations\";\r\nimport {onMounted, ref} from \"vue\";\r\nimport pathsTilesetImage from \"../../assets/tilesets/pathsTileset.png\";\r\nimport stationsTilesetImage from \"../../assets/tilesets/stationsTileset.png\";\r\nimport streetsTilesetImage from \"../../assets/tilesets/streetsTileset.png\";\r\nimport buildingsTilesetImage from \"../../assets/tilesets/buildingsTileset.png\";\r\nimport backgroundTilesetImage from \"../../assets/tilesets/backgroundTileset.png\";\r\nimport pawnsTilesetImage from \"../../assets/tilesets/pawnsTileset.png\";\r\nimport paths from \"../../constants/paths\";\r\nimport streets from \"../../constants/streets\";\r\nimport buildings from \"../../constants/buildings\";\r\nimport background from \"../../constants/background\";\r\n\r\nimport renderer from \"../../modules/renderer\";\r\n\r\nwindow.mitt = window.mitt || new mitt();\r\nexport default {\r\n  name: \"MapManager\",\r\n  props: {\r\n    players: Array,\r\n    currentPlayer: Object,\r\n    autoZoom: Boolean\r\n  },\r\n  setup(props, ctx) {\r\n    const app = new PIXI.Application({\r\n      width: tileSize * mapDimension.width,\r\n      height: tileSize * mapDimension.height,\r\n      backgroundColor: 0xf7f7f7,\r\n      antialias: false\r\n    });\r\n\r\n    let ticker = PIXI.Ticker.shared;\r\n    ticker.autoStart = false;\r\n    ticker.stop();\r\n\r\n    PIXI.settings.ROUND_PIXELS = true;\r\n\r\n    app.loader\r\n        .add(\"pathsTileset\", pathsTilesetImage)\r\n        .add(\"stationsTileset\", stationsTilesetImage)\r\n        .add(\"streetsTileset\", streetsTilesetImage)\r\n        .add(\"buildingsTileset\", buildingsTilesetImage)\r\n        .add(\"backgroundTileset\", backgroundTilesetImage)\r\n        .add(\"pawnsTileset\", pawnsTilesetImage)\r\n        .load((loader, resources) => {\r\n\r\n          //crop tilesets to get tiles textures\r\n          let textures = {\r\n            paths: [],\r\n            stations: [],\r\n            streets: [],\r\n            buildings: [],\r\n            backgrounds: [],\r\n            pawns: []\r\n          }\r\n\r\n          for (let i = 0; i < tilesetsDimension.paths.width * tilesetsDimension.paths.height; i++) {\r\n            let x = i % tilesetsDimension.paths.width;\r\n            let y = Math.floor(i / tilesetsDimension.paths.width);\r\n            textures.paths[i] = new PIXI.Texture(\r\n                resources.pathsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          for (let i = 0; i < tilesetsDimension.stations.width * tilesetsDimension.stations.height; i++) {\r\n            let x = i % tilesetsDimension.stations.width;\r\n            let y = Math.floor(i / tilesetsDimension.stations.width);\r\n            textures.stations[i] = new PIXI.Texture(\r\n                resources.stationsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          for (let i = 0; i < tilesetsDimension.streets.width * tilesetsDimension.streets.height; i++) {\r\n            let x = i % tilesetsDimension.streets.width;\r\n            let y = Math.floor(i / tilesetsDimension.streets.width);\r\n            textures.streets[i] = new PIXI.Texture(\r\n                resources.streetsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          for (let i = 0; i < tilesetsDimension.buildings.width * tilesetsDimension.buildings.height; i++) {\r\n            let x = i % tilesetsDimension.buildings.width;\r\n            let y = Math.floor(i / tilesetsDimension.buildings.width);\r\n            textures.buildings[i] = new PIXI.Texture(\r\n                resources.buildingsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          for (let i = 0; i < tilesetsDimension.background.width * tilesetsDimension.background.height; i++) {\r\n            let x = i % tilesetsDimension.background.width;\r\n            let y = Math.floor(i / tilesetsDimension.background.width);\r\n            textures.backgrounds[i] = new PIXI.Texture(\r\n                resources.backgroundTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize, tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          for (let i = 0; i < tilesetsDimension.pawns.width * tilesetsDimension.pawns.height; i++) {\r\n            let x = i % tilesetsDimension.pawns.width;\r\n            let y = Math.floor(i / tilesetsDimension.pawns.width);\r\n            textures.pawns[i] = new PIXI.Texture(\r\n                resources.pawnsTileset.texture,\r\n                new PIXI.Rectangle(x * tileSize, y * tileSize , tileSize, tileSize)\r\n            );\r\n          }\r\n\r\n          let pathsContainer = new PIXI.ParticleContainer(2500);\r\n          let streetsContainer = new PIXI.ParticleContainer(2500);\r\n          let buildingsContainer = new PIXI.ParticleContainer(2500);\r\n          let backgroundContainer = new PIXI.ParticleContainer(2500);\r\n\r\n          for (let row = 0; row < mapDimension.height; row++){\r\n            for (let col = 0; col < mapDimension.width; col++){\r\n              let pathCode = paths[row][col];\r\n              if(pathCode>=0) {\r\n                let pathTexture = textures.paths[pathCode];\r\n                let pathSprite = new PIXI.Sprite(pathTexture);\r\n                pathSprite.x = tileSize * col;\r\n                pathSprite.y = tileSize * row;\r\n                pathsContainer.addChild(pathSprite);\r\n              }\r\n\r\n              let streetCode = streets[row][col];\r\n              if(streetCode>=0){\r\n                let streetsTexture = textures.streets[streetCode];\r\n                let streetsSprite = new PIXI.Sprite(streetsTexture);\r\n                streetsSprite.x = tileSize * col;\r\n                streetsSprite.y = tileSize * row;\r\n                streetsContainer.addChild(streetsSprite);\r\n              }\r\n\r\n              let buildingCode = buildings[row][col];\r\n              if(buildingCode>=0) {\r\n                let buildingsTexture = textures.buildings[buildingCode];\r\n                let buildingsSprite = new PIXI.Sprite(buildingsTexture);\r\n                buildingsSprite.x = tileSize * col;\r\n                buildingsSprite.y = tileSize * row;\r\n                buildingsContainer.addChild(buildingsSprite);\r\n              }\r\n\r\n              let backgroundCode = background[row][col];\r\n              if(backgroundCode>=0) {\r\n                let backgroundTexture = textures.backgrounds[backgroundCode];\r\n                let backgroundSprite = new PIXI.Sprite(backgroundTexture);\r\n                backgroundSprite.x = tileSize * col;\r\n                backgroundSprite.y = tileSize * row;\r\n                backgroundContainer.addChild(backgroundSprite);\r\n              }\r\n            }\r\n          }\r\n\r\n\r\n          let stationsContainer = new PIXI.Container();\r\n          for(let i = 0; i < stations.length; i++){\r\n            let sprite = new PIXI.Sprite(textures.stations[stations[i].type]);\r\n            sprite.x = tileSize * stations[i].point[0];\r\n            sprite.y = tileSize * stations[i].point[1];\r\n            let color = (stations[i].type === 2) ? \"white\" : \"black\";\r\n            let label = new PIXI.Text(stations[i].number, {fontFamily: \"sans-serif\", fontWeight: \"bold\", fill: color});\r\n            label.anchor.x = label.anchor.y = 0.5;\r\n            label.x = sprite.width / 2;\r\n            label.y = sprite.height / 2;\r\n            sprite.addChild(label);\r\n            sprite.interactive = true;\r\n            sprite.buttonMode = true;\r\n            stationsContainer.addChild(sprite);\r\n            let clickStarts = () => {\r\n              sprite.clickStartedDate = new Date().getTime();\r\n            }\r\n            let clickEnds = () => {\r\n              if(new Date().getTime() - sprite.clickStartedDate < 1000) ctx.emit(\"station-clicked\", i+1);\r\n            }\r\n            sprite.on(\"mousedown\", clickStarts);\r\n            sprite.on(\"touchstart\", clickStarts);\r\n            sprite.on(\"mouseup\", clickEnds);\r\n            sprite.on(\"touchend\", clickEnds);\r\n          }\r\n\r\n          app.stage.addChild(backgroundContainer);\r\n          app.stage.addChild(buildingsContainer);\r\n          app.stage.addChild(streetsContainer);\r\n          app.stage.addChild(pathsContainer);\r\n          app.stage.addChild(stationsContainer);\r\n\r\n          let pawnsContainer = new PIXI.Container();\r\n          props.players.forEach(player => {\r\n            let texture = textures.pawns[player.color+1];\r\n            let sprite = new PIXI.Sprite(texture);\r\n            if(player.position) {\r\n              let point = stations[player.position - 1].point;\r\n              sprite.x = point[0] * tileSize;\r\n              sprite.y = point[1] * tileSize;\r\n              sprite.interactive = true;\r\n              let clickStarts = () => {\r\n                sprite.clickStartedDate = new Date().getTime();\r\n              }\r\n              let clickEnds = () => {\r\n                if(new Date().getTime() - sprite.clickStartedDate < 1000) ctx.emit(\"station-clicked\", player.position);\r\n              }\r\n              sprite.on(\"mousedown\", clickStarts);\r\n              sprite.on(\"touchstart\", clickStarts);\r\n              sprite.on(\"mouseup\", clickEnds);\r\n              sprite.on(\"touchend\", clickEnds);\r\n            } else {\r\n              sprite.visible = false;\r\n            }\r\n            pawnsContainer.addChild(sprite);\r\n          });\r\n\r\n          app.stage.addChild(pawnsContainer);\r\n\r\n          let updatePawns = (players) => {\r\n            players.forEach( (player, index) => {\r\n              let sprite = pawnsContainer.children[index];\r\n              if(player.position) {\r\n                sprite.visible = true;\r\n                let point = stations[player.position - 1].point;\r\n                sprite.x = point[0] * tileSize;\r\n                sprite.y = point[1] * tileSize;\r\n              } else {\r\n                sprite.visible = false;\r\n              }\r\n            });\r\n          };\r\n          window.mitt.on(\"update-pawns\", updatePawns);\r\n        });\r\n\r\n    app.loader.onError.add((e)=>{\r\n      console.error(e);\r\n    });\r\n\r\n    onMounted(() => {\r\n      document.getElementById(\"map-manager__main-panel\").appendChild(app.view);\r\n      const dragging = ref(false);\r\n      let width = window.innerWidth<501 ? window.innerWidth : window.innerHeight*1.5;\r\n      let defaultScale = width / 60 / 64;\r\n      const container = document.getElementById(\"map-manager__main-panel\");\r\n      let instance = renderer({\r\n        minScale: Math.min(zoomAndPanParams.minZoom, defaultScale),\r\n        maxScale: zoomAndPanParams.maxZoom,\r\n        element: container.children[0],\r\n        scaleSensitivity: zoomAndPanParams.zoomSensibility,\r\n        defaultScale: defaultScale,\r\n        containerDimension: {\r\n          width: container.clientWidth,\r\n          height: container.clientHeight\r\n        }\r\n      });\r\n\r\n      window.addEventListener(\"resize\", ()=>{\r\n        width = window.innerWidth<501 ? window.innerWidth : window.innerHeight*1.5;\r\n        defaultScale = width / 60 / 64;\r\n        instance = renderer({\r\n          minScale: Math.min(zoomAndPanParams.minZoom, defaultScale),\r\n          maxScale: zoomAndPanParams.maxZoom,\r\n          element: container.children[0],\r\n          scaleSensitivity: zoomAndPanParams.zoomSensibility,\r\n          defaultScale: defaultScale,\r\n          containerDimension: {\r\n            width: container.clientWidth,\r\n            height: container.clientHeight\r\n          }\r\n        });\r\n      })\r\n\r\n      const zoomToPawn = (player) => {\r\n        instance.toDefault();\r\n        if(!player.position) return;\r\n        let x = tileSize * stations[player.position-1].point[0] * defaultScale;\r\n        let y = tileSize * stations[player.position-1].point[1] * defaultScale;\r\n        instance.zoom({\r\n          x: x,\r\n          y: y,\r\n          deltaScale: zoomAndPanParams.defaultZoom\r\n        });\r\n      }\r\n      instance.toDefault();\r\n      if (props.autoZoom && props.currentPlayer) zoomToPawn(props.currentPlayer);\r\n\r\n      window.mitt.on(\"zoom-to-default\", instance.toDefault);\r\n      window.mitt.on(\"zoom-to-pawn\", zoomToPawn);\r\n\r\n      container.addEventListener(\"wheel\", (event) => {\r\n        instance.zoom({\r\n          deltaScale: Math.sign(event.deltaY),\r\n          x: event.pageX,\r\n          y: event.pageY\r\n        });\r\n      }, {passive: true});\r\n\r\n      container.addEventListener(\"mousedown\", () => {\r\n        dragging.value = true;\r\n        document.body.style.cursor = \"move\";\r\n      });\r\n\r\n      container.addEventListener(\"dblclick\", (event) => {\r\n        if(!instance.isToDefault()) instance.toDefault();\r\n        else instance.zoom({\r\n          x: event.pageX,\r\n          y: event.pageY,\r\n          deltaScale: zoomAndPanParams.defaultZoom\r\n        });\r\n      })\r\n\r\n      container.addEventListener(\"mousemove\", (event) => {\r\n        if (!dragging.value) return;\r\n        instance.panBy({\r\n          originX: event.movementX,\r\n          originY: event.movementY\r\n        });\r\n      });\r\n\r\n      container.addEventListener(\"mouseup\", () => {\r\n        dragging.value = false;\r\n        document.body.style.cursor = \"default\";\r\n      });\r\n\r\n      let previousTouch;\r\n      let lastMiddlePoint;\r\n      let lastDistance;\r\n      const getDistanceFromTouches = (touches) => Math.sqrt( Math.pow(touches[0].pageX-touches[1].pageX, 2) + Math.pow(touches[0].pageY-touches[1].pageY, 2) )\r\n      const getMiddlePointFromTouches = (touches) => {\r\n        return {\r\n          x: (touches[0].pageX+touches[1].pageX)/2,\r\n          y: (touches[0].pageY+touches[1].pageY)/2\r\n        }\r\n      }\r\n      container.addEventListener(\"touchstart\", (event) => {\r\n        if(event.touches.length <= 2) {\r\n          previousTouch = event;\r\n          if (event.touches.length === 2) {\r\n            lastDistance = getDistanceFromTouches(event.touches);\r\n            lastMiddlePoint = getMiddlePointFromTouches(event.touches);\r\n          }\r\n        }\r\n      }, {passive: true});\r\n\r\n      container.addEventListener(\"touchmove\", (event) => {\r\n        if(event.touches.length === 1){\r\n          let dx = event.touches[0].pageX-previousTouch.touches[0].pageX;\r\n          let dy = event.touches[0].pageY-previousTouch.touches[0].pageY;\r\n          instance.panBy({\r\n            originX: dx,\r\n            originY: dy\r\n          });\r\n          previousTouch = event;\r\n        }else if(event.touches.length === 2) {\r\n          let distance = getDistanceFromTouches(event.touches);\r\n          let deltaScale = Math.sign(distance/lastDistance - 1) / 2;\r\n\r\n          let {x, y} = getMiddlePointFromTouches(event.touches);\r\n          instance.zoom({x, y, deltaScale});\r\n          instance.panBy({\r\n            originX: x - lastMiddlePoint.x,\r\n            originY: y - lastMiddlePoint.y\r\n          });\r\n          lastMiddlePoint = {x, y};\r\n          lastDistance = distance;\r\n\r\n        }\r\n      }, {passive: true});\r\n\r\n      let lastTimestamp;\r\n      let lastPositions;\r\n      container.addEventListener(\"touchend\", (event)=>{\r\n        if(lastTimestamp && lastPositions){\r\n          if(event.timeStamp-lastTimestamp<zoomAndPanParams.doubleTapTimeTolerance){\r\n            if(event.changedTouches.length===1){\r\n              if(Math.abs(event.changedTouches[0].pageX-lastPositions.pageX)<zoomAndPanParams.doubleTapDistanceTolerance){\r\n                if(Math.abs(event.changedTouches[0].pageY-lastPositions.pageY)<zoomAndPanParams.doubleTapDistanceTolerance){\r\n                  event.preventDefault();\r\n                  if(!instance.isToDefault()) instance.toDefault();\r\n                  else instance.zoom({\r\n                    x: event.changedTouches[0].pageX,\r\n                    y: event.changedTouches[0].pageY,\r\n                    deltaScale: zoomAndPanParams.defaultZoom\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        lastTimestamp = event.timeStamp;\r\n        lastPositions = {pageX: event.changedTouches[0].pageX, pageY: event.changedTouches[0].pageY}\r\n      })\r\n\r\n      window.addEventListener(\"keydown\", (event) => keyPressed(event, instance));\r\n    });\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.map-manager__main-panel{\r\n  overflow: hidden;\r\n  width: 100%;\r\n  height: 100%;\r\n  @media (max-width: 500px) {\r\n    width: 100%;\r\n    height: 300px;\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 2;\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}